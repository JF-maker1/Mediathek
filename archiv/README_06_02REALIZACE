JÃ_PROMPT:  

V pÅ™Ã­loze je zadÃ¡nÃ­ pro tvorbu webovÃ© aplikace pro sprÃ¡vu videÃ­ a obsahu videÃ­ [README_05_01ZADANI]. ProsÃ­m ze zadÃ¡nÃ­ vytvoÅ™it konkrÃ©tnÃ­ plÃ¡n realizace (resp. jednotlivÃ© pÅ™Ã­kazy, nastavenÃ­, instalace, ovÄ›Å™enÃ­ prostÅ™edÃ­ jak systÃ©movÃ©, tak projektovÃ© a tak podobnÄ›) vÄetnÄ› plÃ¡nu testovÃ¡nÃ­ kterÃ¡ potvrdÃ­ ÃºspÄ›Å¡nÃ© ukonÄenÃ­ realizaÄnÃ­ fÃ¡ze vychÃ¡zejÃ­cÃ­ ze zadÃ¡nÃ­ tÃ©to realizaÄnÃ­ fÃ¡ze viz zadÃ¡nÃ­ pro tuto fÃ¡zi realizace pÅ™Ã­loze . RealizaÄnÃ­ fÃ¡ze je ukonÄena testovÃ¡nÃ­m jak na lokÃ¡lnÃ­m prostÅ™edÃ­ tak i na produkÄnÃ­m prostÅ™edÃ­. V pÅ™Ã­loze je rovnÄ›Å¾ snÃ­mek projektovÃ©ho adresÃ¡Å™e po ukonÄenÃ­ pÅ™edchozÃ­ fÃ¡ze realizace [README_04_03project_snapshot] kterÃ½ by mÄ›l poskytnout pÅ™edstavu o podmÃ­nkÃ¡vh jednak vnitÅ™nÃ­ch v projektu tak podmÃ­nkÃ¡ch vnÄ›jÅ¡Ã­ch pro tento projekt tak i detailu. 

AI_RESPONZE:

JasnÄ›, na zÃ¡kladÄ› schvÃ¡lenÃ©ho zadÃ¡nÃ­ FÃ¡ze 6 (verze 6.0) a snÃ­mku projektu po FÃ¡zi 5  pÅ™ipravil jsem detailnÃ­ plÃ¡n realizace.


Tento plÃ¡n se zamÄ›Å™uje na implementaci jÃ¡drovÃ© funkcionality â€“ strukturovanÃ©ho obsahu videa.

ğŸ“„ PlÃ¡n realizace: WebovÃ¡ aplikace Mediathek (FÃ¡ze 6 - StrukturovanÃ½ Obsah Videa)
Navazuje na: README_05_01ZADANI (SchvÃ¡lenÃ© zadÃ¡nÃ­ FÃ¡ze 6)

Stav projektu pÅ™ed: README_04_03project_snapshot (SnÃ­mek po FÃ¡zi 5)

ğŸ¯ CÃ­l FÃ¡ze
CÃ­lem je implementovat kompletnÃ­ funkcionalitu pro vklÃ¡dÃ¡nÃ­ (pÅ™es <textarea>), parsovÃ¡nÃ­ (formÃ¡t MTF-H), uklÃ¡dÃ¡nÃ­ (novÃ½ model Chapter) a interaktivnÃ­ zobrazovÃ¡nÃ­ (klikacÃ­ seznam kapitol) strukturovanÃ©ho obsahu videa na strÃ¡nce detailu videa.

1. ğŸ–¥ï¸ PÅ™Ã­prava ProstÅ™edÃ­
NeÅ¾ zaÄneme s kÃ³dem, zajistÃ­me, Å¾e mÃ¡me vÅ¡e pÅ™ipraveno.

Kontrola Git: Zkontrolujeme, Å¾e jsme na main vÄ›tvi a mÃ¡me staÅ¾enÃ© vÅ¡echny zmÄ›ny.

Bash

git checkout main
git pull origin main
NovÃ¡ VÄ›tev: VytvoÅ™Ã­me novou vÄ›tev pro FÃ¡zi 6.

Bash

git checkout -b feature/faze-6-chapters
Instalace ZÃ¡vislostÃ­: OvÄ›Å™Ã­me, Å¾e mÃ¡me vÅ¡echny zÃ¡vislosti (aÄkoliv FÃ¡ze 6 nepÅ™idÃ¡vÃ¡ novÃ© npm balÃ­Äky).

Bash

npm install
OvÄ›Å™enÃ­ SluÅ¾eb: SpustÃ­me lokÃ¡lnÃ­ vÃ½vojovÃ© prostÅ™edÃ­.

Bash

npm run dev
OvÄ›Å™enÃ­: Aplikace bÄ›Å¾Ã­ na http://localhost:3000. PÅ™ihlÃ¡Å¡enÃ­ (role ADMIN) funguje.

2. ğŸ—„ï¸ Krok 1: Aktualizace DatabÃ¡zovÃ©ho SchÃ©matu (Prisma)
RozÅ¡Ã­Å™Ã­me databÃ¡zi o model Chapter pro uklÃ¡dÃ¡nÃ­ kapitol.

Ãšprava prisma/schema.prisma: OtevÅ™ete soubor a pÅ™idejte novÃ½ model Chapter a relaci do modelu Video. Soubor: prisma/schema.prisma

Fragment kÃ³du

// ... stÃ¡vajÃ­cÃ­ model User ...

model Video {
  id        String   @id @default(cuid())
  youtubeId String   @unique
  title     String
  summary   String   @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  authorId  String
  author    User     @relation(fields: [authorId], references: [id])

  // --- PÅ˜IDAT TUTO RELACI ---
  chapters  Chapter[]
  // --- KONEC PÅ˜IDANÃ‰ ÄŒÃSTI ---
}

// --- PÅ˜IDAT TENTP NOVÃ MODEL ---
model Chapter {
  id        String   @id @default(cuid())
  text      String   // ZobrazenÃ½ text (napÅ™. "1.1. Ãšvod...") [cite: 195]
  startTime Int      // ÄŒas "od" v sekundÃ¡ch [cite: 195]
  endTime   Int?     // ÄŒas "do" v sekundÃ¡ch (nepovinnÃ©) [cite: 196]
  level     Int      // ÃšroveÅˆ zanoÅ™enÃ­ (0 = koÅ™en, 1 = podkapitola) [cite: 196]
  order     Int      // PoÅ™adÃ­ kapitoly v rÃ¡mci videa [cite: 196]

  // Relace k videu. PÅ™i smazÃ¡nÃ­ videa se smaÅ¾ou i kapitoly. [cite: 197]
  video   Video  @relation(fields: [videoId], references: [id], onDelete: Cascade)
  videoId String
}
// --- KONEC PÅ˜IDANÃ‰ ÄŒÃSTI ---
ProvedenÃ­ Migrace: VytvoÅ™Ã­me novou databÃ¡zovou migraci a aplikujeme ji.

Bash

npm run prisma:migrate
VÃ½zva: Zadejte nÃ¡zev migrace, napÅ™: add_chapter_model

GenerovÃ¡nÃ­ Klienta: (MÄ›lo by probÄ›hnout automaticky, ale pro jistotu)

Bash

npm run prisma:generate
3. âš™ï¸ Krok 2: VytvoÅ™enÃ­ Logiky Parseru (MTF-H)
VytvoÅ™Ã­me samostatnou utilitu pro parsovÃ¡nÃ­ textu z <textarea>.

VytvoÅ™enÃ­ Souboru: VytvoÅ™Ã­me novÃ½ soubor pro utility, napÅ™. lib/parser.ts. Soubor: lib/parser.ts

TypeScript

// Definujeme typ pro nÃ¡vratovou hodnotu
export interface ParsedChapter {
  text: string;
  startTime: number;
  endTime: number | null;
  level: number;
}

/**
 * PÅ™evede ÄasovÃ½ Å™etÄ›zec (MM:SS) na sekundy.
 */
function timeToSeconds(timeStr: string): number {
  const parts = timeStr.split(':').map(Number);
  if (parts.length === 2) {
    return parts[0] * 60 + parts[1];
  }
  // TODO: ZvÃ¡Å¾it oÅ¡etÅ™enÃ­ neplatnÃ©ho formÃ¡tu, i kdyÅ¾ Regex by to mÄ›l chytit
  return 0;
}

/**
 * ParsovÃ¡nÃ­ strukturovanÃ©ho obsahu z formÃ¡tu MTF-H [cite: 185]
 */
export function parseStructuredContent(
  rawText: string
): Omit<ParsedChapter, 'order'>[] {
  const lines = rawText.split('\n').filter((line) => line.trim() !== ''); // Ignoruj prÃ¡zdnÃ© Å™Ã¡dky [cite: 218]
  const chapters: Omit<ParsedChapter, 'order'>[] = [];

  for (const line of lines) {
    const trimmedLine = line.trim();

    // 1. Extrakce ÄasovÃ© znaÄky na konci [cite: 201]
    const timeRegex = /\((\d{1,2}:\d{2})(?:\s*-\s*(\d{1,2}:\d{2}))?\)$/;
    const timeMatch = trimmedLine.match(timeRegex);

    if (!timeMatch) {
      throw new Error(
        `NeplatnÃ½ formÃ¡t Å™Ã¡dku: ChybÃ­ ÄasovÃ¡ znaÄka (MM:SS) na konci. Å˜Ã¡dek: "${trimmedLine}"`
      ); // 
    }

    const startTime = timeToSeconds(timeMatch[1]);
    const endTime = timeMatch[2] ? timeToSeconds(timeMatch[2]) : null;

    // 2. Extrakce zÃ¡kladu (vÅ¡e pÅ™ed Äasem) [cite: 202]
    const baseText = trimmedLine.substring(0, timeMatch.index).trim();

    // 3. Extrakce ÄÃ­slovÃ¡nÃ­ a vÃ½poÄet ÃºrovnÄ› [cite: 203]
    const numberingRegex = /^(\d+(?:\.\d+)*)\.?\s+/;
    const numberingMatch = baseText.match(numberingRegex);

    if (!numberingMatch) {
      throw new Error(
        `NeplatnÃ½ formÃ¡t Å™Ã¡dku: ChybÃ­ hierarchickÃ© ÄÃ­slovÃ¡nÃ­ (napÅ™. 1.1.) na zaÄÃ¡tku. Å˜Ã¡dek: "${trimmedLine}"`
      ); // 
    }

    // 4. VÃ½poÄet ÃºrovnÄ› [cite: 204]
    // "1." -> level 0
    // "1.1." -> level 1
    // "1.1.1." -> level 2
    const level = numberingMatch[1].split('.').length - 1;

    // 5. UloÅ¾enÃ­ textu (vÄetnÄ› ÄÃ­slovÃ¡nÃ­) [cite: 205]
    const text = baseText;

    chapters.push({ text, startTime, endTime, level });
  }

  return chapters;
}
4. ğŸ“¦ Krok 3: Aktualizace Backend API (UklÃ¡dÃ¡nÃ­ Videa)
UpravÃ­me app/api/videos/route.ts, aby pÅ™ijÃ­mal, parsoval a uklÃ¡dal kapitoly v databÃ¡zovÃ© transakci.

Ãšprava app/api/videos/route.ts: Soubor: app/api/videos/route.ts

TypeScript

import { NextResponse } from 'next/server';
import { PrismaClient } from '@prisma/client';
import { getServerSession } from 'next-auth/next';
import { authOptions } from '@/app/api/auth/[...nextauth]/route';
import { parseStructuredContent } from '@/lib/parser'; // <-- 1. IMPORT PARSERU

const prisma = new PrismaClient();

// ... stÃ¡vajÃ­cÃ­ funkce extractYouTubeId ... [cite: 389-392]

export async function POST(request: Request) {
  try {
    const session = await getServerSession(authOptions);
    if (!session || session.user?.role !== 'ADMIN') {
      // ... stÃ¡vajÃ­cÃ­ oÅ¡etÅ™enÃ­ 403 ... [cite: 393]
    }

    const body = await request.json();
    // 2. PÅ˜IDÃNÃ `structuredContent`
    const { youtubeUrl, title, summary, structuredContent } = body; // 

    if (!youtubeUrl || !title || !summary) {
      // ... stÃ¡vajÃ­cÃ­ oÅ¡etÅ™enÃ­ 400 ... [cite: 395]
    }

    const youtubeId = extractYouTubeId(youtubeUrl);
    if (!youtubeId) {
      // ... stÃ¡vajÃ­cÃ­ oÅ¡etÅ™enÃ­ 400 ... [cite: 397]
    }

    // 3. PARSOVÃNÃ KAPITOL (PÅ˜ED TRANSAKCÃ)
    // MusÃ­me to provÃ©st zde, aby pÅ™Ã­padnÃ¡ chyba parseru 
    // zabrÃ¡nila spuÅ¡tÄ›nÃ­ databÃ¡zovÃ© transakce.
    const parsedChapters = parseStructuredContent(structuredContent || '');

    // 4. POUÅ½ITÃ DATABÃZOVÃ‰ TRANSAKCE
    // TÃ­m zajistÃ­me, Å¾e se video a jeho kapitoly uloÅ¾Ã­
    // buÄ obojÃ­, nebo nic. [cite: 206]
    const newVideo = await prisma.$transaction(async (tx) => {
      // 4a. VytvoÅ™enÃ­ videa
      const video = await tx.video.create({
        data: {
          youtubeId: youtubeId,
          title: title,
          summary: summary,
          authorId: session.user.id,
        },
      });

      // 4b. VytvoÅ™enÃ­ kapitol (pokud nÄ›jakÃ© jsou)
      if (parsedChapters.length > 0) {
        const chapterData = parsedChapters.map((chapter, index) => ({
          ...chapter,
          order: index, // PÅ™idÃ¡nÃ­ 'order' [cite: 205]
          videoId: video.id, // PropojenÃ­ s prÃ¡vÄ› vytvoÅ™enÃ½m videem
        }));

        await tx.chapter.createMany({
          data: chapterData,
        });
      }

      return video;
    });

    return new NextResponse(JSON.stringify(newVideo), {
      status: 201,
      headers: { 'Content-Type': 'application/json' },
    }); // [cite: 400]

  } catch (error) {
    // 5. OÅ ETÅ˜ENÃ CHYB PARSERU A DB
    if (error instanceof Error) {
      if (error.message.startsWith('NeplatnÃ½ formÃ¡t Å™Ã¡dku')) {
        // Chyba z naÅ¡eho parseru 
        return new NextResponse(JSON.stringify({ message: error.message }), {
          status: 400,
          headers: { 'Content-Type': 'application/json' },
        });
      }
      if ((error as any).code === 'P2002') { // Prisma unique constraint
        // ... stÃ¡vajÃ­cÃ­ oÅ¡etÅ™enÃ­ 409 ... [cite: 401]
      }
    }

    console.error('API_VIDEOS_POST_ERROR', error);
    // ... stÃ¡vajÃ­cÃ­ oÅ¡etÅ™enÃ­ 500 ... [cite: 404]
  }
}
5. âŒ¨ï¸ Krok 4: Aktualizace FormulÃ¡Å™e pro PÅ™idÃ¡nÃ­ Videa
PÅ™idÃ¡me <textarea> do formulÃ¡Å™e app/admin/add/page.tsx.

Ãšprava app/admin/add/page.tsx: Soubor: app/admin/add/page.tsx

TypeScript

"use client";

import { useState, FormEvent } from 'react';

export default function AddVideoPage() {
  const [youtubeUrl, setYoutubeUrl] = useState('');
  const [title, setTitle] = useState('');
  const [summary, setSummary] = useState('');
  // 1. PÅ˜IDÃNÃ NOVÃ‰HO STAVU
  const [structuredContent, setStructuredContent] = useState(''); // [cite: 178]

  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [success, setSuccess] = useState<string | null>(null);

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    setSuccess(null);

    try {
      const res = await fetch('/api/videos', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        // 2. PÅ˜IDÃNÃ structuredContent DO BODY
        body: JSON.stringify({
          youtubeUrl,
          title,
          summary,
          structuredContent, // 
        }),
      });
      // ... stÃ¡vajÃ­cÃ­ kÃ³d ... [cite: 351]

      setSuccess('Video bylo ÃºspÄ›Å¡nÄ› pÅ™idÃ¡no!');
      // 3. RESET I NOVÃ‰HO POLE
      setYoutubeUrl('');
      setTitle('');
      setSummary('');
      setStructuredContent(''); // [cite: 353]
    } catch (err: any) {
      // ... stÃ¡vajÃ­cÃ­ kÃ³d ... [cite: 354]
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="max-w-2xl mx-auto p-4 sm:p-6 lg:p-8">
      <h1 className="text-2xl font-bold mb-6">PÅ™idat novÃ© video</h1>
      <form onSubmit={handleSubmit} className="space-y-6">
        {/* ... pole youtubeUrl ... */} [cite: 357]
        {/* ... pole title ... */} [cite: 359]
        {/* ... pole summary (textarea) ... */} [cite: 361]

        {/* 4. PÅ˜IDÃNÃ NOVÃ‰ TEXTAREA PRO KAPITOLY */}
        <div>
          <label htmlFor="structuredContent" className="block text-sm font-medium text-gray-300">
            StrukturovanÃ½ Obsah (Kapitoly)
          </label>
          <textarea
            id="structuredContent"
            rows={15} // VÄ›tÅ¡Ã­ pole
            value={structuredContent}
            onChange={(e) => setStructuredContent(e.target.value)}
            className="mt-1 block w-full rounded-md border-gray-600 bg-gray-800 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-white p-2 font-mono" // Font-mono pro lepÅ¡Ã­ Äitelnost formÃ¡tu
            placeholder={
1. Kapitola 1 (0:00 - 1:30) 1.1. Podkapitola (0:15 - 0:45) 2. Kapitola 2 (1:30 - 3:00) } /> <p className="mt-2 text-xs text-gray-400"> FormÃ¡t: "1.1. Text (MM:SS - MM:SS)". Hierarchie dle ÄÃ­slovÃ¡nÃ­.  </p> </div> {/* --- KONEC PÅ˜IDANÃ‰ ÄŒÃSTI --- */}

        <div>
          <button
            type="submit"
            disabled={isLoading}
            // ... stÃ¡vajÃ­cÃ­ kÃ³d ... [cite: 364]
          >
            {isLoading ? 'UklÃ¡dÃ¡nÃ­...' : 'UloÅ¾it video'}
          </button>
        </div>
      </form>

      {success && (
        <p className="mt-4 text-sm text-green-500">{success}</p>
      )}
      {error && (
        <p className="mt-4 text-sm text-red-500">{error}</p>
      )}
    </div>
  );
}
```
6. ğŸ¬ Krok 5: Refaktor StrÃ¡nky Detailu Videa (PropojenÃ­)
MusÃ­me refaktorovat app/admin/video/[id]/page.tsx. PÅ¯vodnÃ­ RSC naÄte data, ale pro interaktivitu (player + seznam kapitol) potÅ™ebujeme klientskÃ© komponenty, kterÃ© sdÃ­lÃ­ stav (pÅ™es useRef) .

Ãšprava components/VideoPlayer.tsx: MusÃ­ pÅ™ijÃ­mat onReady prop. Soubor: components/VideoPlayer.tsx

TypeScript

"use client";

import YouTube from 'react-youtube';

interface VideoPlayerProps {
  youtubeId: string;
  // 1. PÅ˜IDÃNÃ onReady PROPU [cite: 209]
  onReady?: (event: { target: any }) => void;
}

export default function VideoPlayer({ youtubeId, onReady }: VideoPlayerProps) {
  const opts = {
    height: '100%',
    width: '100%',
    playerVars: {
      autoplay: 0,
    },
  };
  return (
    <YouTube
      videoId={youtubeId}
      opts={opts}
      className="absolute top-0 left-0 w-full h-full"
      // 2. PROPOJENÃ onReady
      onReady={onReady}
    />
  );
}
VytvoÅ™enÃ­ components/ChapterList.tsx: NovÃ¡ komponenta pro zobrazenÃ­ kapitol. Soubor: components/ChapterList.tsx

TypeScript

"use client";

import { Prisma } from '@prisma/client';
import { RefObject } from 'react';

// ExplicitnÄ› definujeme typ, kterÃ½ oÄekÃ¡vÃ¡me z Prisma dotazu
type ChapterWithData = Prisma.ChapterGetPayload<{}>;

interface ChapterListProps {
  chapters: ChapterWithData[];
  playerRef: RefObject<any>; // Reference na YouTube pÅ™ehrÃ¡vaÄ
}

export default function ChapterList({ chapters, playerRef }: ChapterListProps) {
  if (!chapters || chapters.length === 0) {
    return <p className="text-gray-400">Pro toto video nenÃ­ dostupnÃ½ strukturovanÃ½ obsah.</p>;
  }

  const handleChapterClick = (startTime: number) => {
    playerRef.current?.seekTo(startTime); // Funkce pro skok v Äase [cite: 212]
    playerRef.current?.playVideo(); // VolitelnÃ©: rovnou spustit pÅ™ehrÃ¡vÃ¡nÃ­
  };

  return (
    <div className="space-y-2">
      {chapters.map((chapter) => (
        <button
          key={chapter.id}
          onClick={() => handleChapterClick(chapter.startTime)}
          className="block w-full text-left p-3 rounded-md transition-colors text-gray-200 hover:bg-gray-700"
          style={{
            // HierarchickÃ© odsazenÃ­ na zÃ¡kladÄ› 'level' z DB [cite: 211]
            marginLeft: `${chapter.level * 20}px`,
            width: `calc(100% - ${chapter.level * 20}px)`,
          }}
        >
          {/* ZobrazÃ­me text (kterÃ½ jiÅ¾ obsahuje ÄÃ­slovÃ¡nÃ­) [cite: 205] */}
          {chapter.text}
        </button>
      ))}
    </div>
  );
}
VytvoÅ™enÃ­ components/VideoDetailClientWrapper.tsx: KlientskÃ¡ komponenta, kterÃ¡ bude drÅ¾et useRef a propojovat VideoPlayer a ChapterList. Soubor: components/VideoDetailClientWrapper.tsx

TypeScript

"use client";

import { useRef } from 'react';
import { Prisma } from '@prisma/client';
import VideoPlayer from '@/components/VideoPlayer';
import ChapterList from '@/components/ChapterList';

// PÅ™ijÃ­mÃ¡me data naÄtenÃ¡ na serveru
type ChapterWithData = Prisma.ChapterGetPayload<{}>;

interface VideoDetailClientWrapperProps {
  youtubeId: string;
  chapters: ChapterWithData[];
}

export default function VideoDetailClientWrapper({
  youtubeId,
  chapters,
}: VideoDetailClientWrapperProps) {
  // Reference pro ovlÃ¡dÃ¡nÃ­ pÅ™ehrÃ¡vaÄe [cite: 209]
  const playerRef = useRef(null);

  return (
    <>
      {/* PÅ™ehrÃ¡vaÄ Videa */}
      <div
        className="relative bg-black rounded-lg overflow-hidden"
        style={{ paddingTop: '56.25%' /* PomÄ›r 16:9 */ }}
      >
        <VideoPlayer
          youtubeId={youtubeId}
          onReady={(event) => (playerRef.current = event.target)} // [cite: 209]
        />
      </div>

      {/* StrukturovanÃ½ Obsah */}
      <div className="mt-8">
        <h2 className="text-2xl font-semibold mb-4">StrukturovanÃ½ obsah</h2>
        <ChapterList chapters={chapters} playerRef={playerRef} />
      </div>
    </>
  );
}
Aktualizace app/admin/video/[id]/page.tsx: ZjednoduÅ¡Ã­me RSC strÃ¡nku. Soubor: app/admin/video/[id]/page.tsx

TypeScript

import { PrismaClient } from '@prisma/client';
import { notFound } from 'next/navigation';
// 1. IMPORT NOVÃ‰HO WRAPPERU
import VideoDetailClientWrapper from '@/components/VideoDetailClientWrapper';
import { authOptions } from '@/app/api/auth/[...nextauth]/route';
import { getServerSession } from 'next-auth';

const prisma = new PrismaClient();

interface VideoDetailPageProps {
  params: { // Oprava typu dle Next.js 14+ (params jiÅ¾ nenÃ­ Promise)
    id: string;
  };
}

export const dynamic = 'force-dynamic'; // [cite: 412]

export default async function VideoDetailPage({ params }: VideoDetailPageProps) {
  const { id } = params; // [cite: 414]

  const session = await getServerSession(authOptions);
  if (!session || session.user?.role !== 'ADMIN') {
    notFound(); // [cite: 415]
  }

  // 2. AKTUALIZACE PRISMA DOTAZU PRO NAÄŒTENÃ KAPITOL [cite: 207]
  const video = await prisma.video.findUnique({
    where: { id: id },
    include: {
      chapters: {
        orderBy: {
          order: 'asc', // SeÅ™adÃ­me kapitoly dle 'order'
        },
      },
    },
  });

  if (!video) {
    notFound(); // [cite: 418]
  }

  return (
    <main className="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
      {/* NÃ¡zev Videa */}
      <h1 className="text-3xl font-bold mb-5">{video.title}</h1>

      {/* 3. POUÅ½ITÃ KLIENTSKÃ‰HO WRAPPERU */}
      <VideoDetailClientWrapper
        youtubeId={video.youtubeId}
        chapters={video.chapters}
      />

      {/* Popis / ShrnutÃ­ */}
      <div className="mt-8">
        <h2 className="text-2xl font-semibold mb-4">ShrnutÃ­</h2>
        <p className="text-gray-300 whitespace-pre-wrap text-lg">
          {video.summary}
        </p>
      </div>
    </main>
  );
}
7. ğŸ§ª Krok 6: LokÃ¡lnÃ­ TestovÃ¡nÃ­ a OvÄ›Å™enÃ­
OvÄ›Å™Ã­me vÅ¡echny body z akceptaÄnÃ­ch kritÃ©riÃ­ .

SpuÅ¡tÄ›nÃ­:

Bash

npm run dev

Test 1: VytvoÅ™enÃ­ videa (Happy Path) 

PÅ™ejdÄ›te na /admin/add.

VyplÅˆte URL, NÃ¡zev, ShrnutÃ­.

Do pole "StrukturovanÃ½ Obsah" vloÅ¾te platnÃ½ text (napÅ™. z README_05_01ZADANI ).

KliknÄ›te na "UloÅ¾it video".

OÄekÃ¡vÃ¡no: ZobrazÃ­ se zprÃ¡va "Video bylo ÃºspÄ›Å¡nÄ› pÅ™idÃ¡no!".


Test 2: Kontrola DatabÃ¡ze 

V novÃ©m terminÃ¡lu spusÅ¥te npm run prisma:studio.

OtevÅ™ete model Video a najdÄ›te novÃ© video.

OtevÅ™ete model Chapter.

OÄekÃ¡vÃ¡no: ExistujÃ­ zÃ¡znamy Chapter propojenÃ© s videoId. Hodnoty startTime (v sekundÃ¡ch, napÅ™. 62), level (napÅ™. 0, 1) a text jsou sprÃ¡vnÄ› uloÅ¾eny.


Test 3: ZobrazenÃ­ a Interaktivita 

PÅ™ejdÄ›te na /admin/dashboard.

KliknÄ›te na prÃ¡vÄ› pÅ™idanÃ© video.

OÄekÃ¡vÃ¡no: StrÃ¡nka /admin/video/[id] se naÄte.

OÄekÃ¡vÃ¡no: Pod pÅ™ehrÃ¡vaÄem je vidÄ›t seznam kapitol.

OÄekÃ¡vÃ¡no: Seznam je hierarchicky odsazenÃ½ (podkapitoly jsou odsazeny).

KliknÄ›te na kapitolu s Äasem (napÅ™. 1.2. ... (1:02)).


OÄekÃ¡vÃ¡no: Video v pÅ™ehrÃ¡vaÄi skoÄÃ­ na Äas 62 sekund a zaÄne hrÃ¡t.


Test 4: Chyba Parseru (ChybnÃ½ vstup) 

PÅ™ejdÄ›te na /admin/add.

VyplÅˆte vÅ¡echna pole, ale do "StrukturovanÃ½ Obsah" vloÅ¾te text bez ÄasovÃ© znaÄky na konci (napÅ™. 1. Jen text bez Äasu).

KliknÄ›te na "UloÅ¾it video".


OÄekÃ¡vÃ¡no: FormulÃ¡Å™ zobrazÃ­ chybovou hlÃ¡Å¡ku (napÅ™. "NeplatnÃ½ formÃ¡t Å™Ã¡dku...").

OvÄ›Å™enÃ­: V Prisma Studio ovÄ›Å™te, Å¾e nebylo vytvoÅ™eno ani video, ani kapitoly (dÃ­ky transakci).

8. ğŸš€ Krok 7: NasazenÃ­ na Produkci (Vercel)
Commit a Push:

Bash

git add .
git commit -m "FÃ¡ze 6: Implementace strukturovanÃ©ho obsahu (kapitol)"
git push origin feature/faze-6-chapters
Pull Request: VytvoÅ™te Pull Request na GitHubu z feature/faze-6-chapters do main.

Merge: Po kontrole proveÄte merge.

Deployment: Vercel automaticky detekuje push do main a spustÃ­ build.

Build proces (dle package.json ) zahrnuje prisma generate && prisma migrate deploy, coÅ¾ automaticky aplikuje novou databÃ¡zovou migraci na produkÄnÃ­ Vercel Postgres databÃ¡zi.

9. ğŸŒ Krok 8: TestovÃ¡nÃ­ na Produkci
Po ÃºspÄ›Å¡nÃ©m nasazenÃ­ provedeme stejnÃ© testy (Krok 6, Testy 1-4) na produkÄnÃ­ URL (Vercel). TÃ­m ovÄ›Å™Ã­me finÃ¡lnÃ­ akceptaÄnÃ­ kritÃ©ria.

âœ… ZÃ¡vÄ›r
Po dokonÄenÃ­ Kroku 8 a ovÄ›Å™enÃ­ funkÄnosti na produkci je FÃ¡ze 6 povaÅ¾ovÃ¡na za dokonÄenou. Aplikace nynÃ­ disponuje klÃ­Äovou funkcionalitou strukturovanÃ©ho obsahu.

Tento plÃ¡n je pÅ™ipraven k pÅ™edÃ¡nÃ­ do realizace.







JÃ_PROMPT:  
TestovÃ¡nÃ­ na lokÃ¡lnÃ­m pc probÄ›hlo ok - nasazenÃ­ na produkci probÄ›hlo takÃ© ok a test na produkci rovnÄ›Å¾ ok. DÃ­ky. ;-) Mohu nynÃ­ poprosit o souhrnou zprÃ¡vu z tÃ©to fÃ¡ze realizace vyplÃ½vajÃ­cÃ­ z tohoto chatu k tomuto release. Tuto zprÃ¡vu uloÅ¾Ã­m jako zÃ¡znam o vÅ¡ech zde provedenÃ½ch Äinnostech na projektu v tomto release pro budoucÃ­ informaci o probÄ›hlÃ½ch Äinnostech v tÃ©to fÃ¡zi realizace aplikace - prosÃ­m i o podrobnosti z tÃ©to fÃ¡ze realizace a zejmÃ©na pak ty vÃ½znamnÃ© podrobnosti do tÃ©to souhrnnÃ© zprÃ¡vy o tÃ©to fÃ¡zi realizace. Zde to vÅ¡ak probÄ›hlo hladce - testovÃ¡nÃ­ bylo na prvnÃ­ pokus ;-) SkvÄ›lÃ¡ prÃ¡ce ;-)

AI_RESPONZE:
SkvÄ›lÃ¡ prÃ¡ce! Gratuluji k ÃºspÄ›Å¡nÃ©mu dokonÄenÃ­ FÃ¡ze 6. Bylo mi potÄ›Å¡enÃ­m sledovat, jak hladce implementace probÄ›hla, coÅ¾ svÄ›dÄÃ­ o kvalitÄ› nÃ¡vrhu i provedenÃ­.

Zde je souhrnnÃ¡ zprÃ¡va o FÃ¡zi 6, kterÃ¡ mapuje celÃ½ proces od zadÃ¡nÃ­ aÅ¾ po finÃ¡lnÃ­ nasazenÃ­, vÄetnÄ› klÃ­ÄovÃ½ch technickÃ½ch rozhodnutÃ­.

ğŸ“¦ SouhrnnÃ¡ ZprÃ¡va: FÃ¡ze 6 â€“ Implementace StrukturovanÃ©ho Obsahu (Kapitol)
Projekt: Mediathek Datum: 13. listopadu 2025 Verze releasu: 6.0 (navazuje na FÃ¡zi 5)

1. ğŸ¯ CÃ­l FÃ¡ze
PrimÃ¡rnÃ­m a jedinÃ½m cÃ­lem tÃ©to fÃ¡ze bylo implementovat absolutnÃ­ jÃ¡dro a hlavnÃ­ pÅ™idanou hodnotu aplikace: schopnost vklÃ¡dat, uklÃ¡dat a interaktivnÄ› zobrazovat strukturovanÃ½ obsah videa (kapitoly a podkapitoly).

CÃ­lem bylo pÅ™emÄ›nit aplikaci z "galerie videÃ­" na "nÃ¡stroj pro orientaci v obsahu", kterÃ½ naplÅˆuje vizi "obsahu knihy" pro videa.

Stav: ÃšspÄ›Å¡nÄ› dokonÄeno a nasazeno.

2. ğŸ’¡ KlÃ­ÄovÃ¡ ArchitektonickÃ¡ RozhodnutÃ­ (Diskuze a NÃ¡vrh)
BÄ›hem tÃ©to fÃ¡ze probÄ›hla zÃ¡sadnÃ­ diskuze o tom, jak data vklÃ¡dat a zpracovÃ¡vat. Tato rozhodnutÃ­ definovala celou implementaci:


Forma Vstupu: Z nÄ›kolika variant (komplexnÃ­ UI editor, nahrÃ¡vÃ¡nÃ­ XML) byla po diskuzi zvolena Varianta C: JednoduchÃ© TextovÃ© Pole (<textarea>). Toto Å™eÅ¡enÃ­ pÅ™edstavuje ideÃ¡lnÃ­ kompromis mezi jednoduchostÃ­ implementace a flexibilitou pro administrÃ¡tora, kterÃ½ obsah pÅ™ipravuje externÄ› (manuÃ¡lnÄ› nebo pomocÃ­ AI).





Logika Parseru (KlÃ­ÄovÃ¡ ZmÄ›na): PÅ¯vodnÃ­ nÃ¡vrh poÄÃ­tal s parsovÃ¡nÃ­m hierarchie na zÃ¡kladÄ› odsazenÃ­ textu.


VÃ¡Å¡ Vstup: Na zÃ¡kladÄ› vaÅ¡Ã­ klÃ­ÄovÃ© zpÄ›tnÃ© vazby  byl tento nÃ¡vrh opuÅ¡tÄ›n jako pÅ™Ã­liÅ¡ kÅ™ehkÃ½.


FinÃ¡lnÃ­ Å˜eÅ¡enÃ­: Byl definovÃ¡n novÃ½, robustnÄ›jÅ¡Ã­ formÃ¡t "Mediathek Timestamps Format - Hierarchical (MTF-H)". Tento formÃ¡t je zaloÅ¾en na explicitnÃ­m hierarchickÃ©m ÄÃ­slovÃ¡nÃ­ (napÅ™. 1.1., 1.1.2.) a ÄasovÃ© znaÄce na konci Å™Ã¡dku (napÅ™. (0:00 - 1:02)). Toto rozhodnutÃ­ zÃ¡sadnÄ› zvÃ½Å¡ilo spolehlivost celÃ©ho systÃ©mu.





3. ğŸ› ï¸ PÅ™ehled ImplementovanÃ½ch ZmÄ›n
Na zÃ¡kladÄ› schvÃ¡lenÃ©ho plÃ¡nu realizace byly provedeny nÃ¡sledujÃ­cÃ­ kroky:

Backend (Data a Logika)
DatabÃ¡ze (Prisma):

Do souboru prisma/schema.prisma byl pÅ™idÃ¡n novÃ½ model Chapter.

Tento model obsahuje klÃ­ÄovÃ¡ pole: text (String), startTime (Int, v sekundÃ¡ch), level (Int, ÃºroveÅˆ zanoÅ™enÃ­) a order (Int, poÅ™adÃ­) .

Do modelu Video byla pÅ™idÃ¡na relace chapters Chapter[].

Byla pouÅ¾ita relace onDelete: Cascade, kterÃ¡ zajiÅ¡Å¥uje automatickÃ© smazÃ¡nÃ­ kapitol pÅ™i smazÃ¡nÃ­ videa.

Byla vygenerovÃ¡na a aplikovÃ¡na novÃ¡ databÃ¡zovÃ¡ migrace (lokÃ¡lnÄ› i na produkci pÅ™es prisma migrate deploy).

Parser (MTF-H):

Byla vytvoÅ™ena novÃ¡ serverovÃ¡ utilita (napÅ™. lib/parser.ts) obsahujÃ­cÃ­ funkci parseStructuredContent.

Tato funkce pomocÃ­ regulÃ¡rnÃ­ch vÃ½razÅ¯ parsuje kaÅ¾dÃ½ Å™Ã¡dek:

Extrahuje ÄasovÃ© znaÄky z konce Å™Ã¡dku.

PÅ™evede Äasy (napÅ™. "1:02") na sekundy (startTime: 62).

Extrahuje hierarchickÃ© ÄÃ­slovÃ¡nÃ­ ze zaÄÃ¡tku Å™Ã¡dku.

VypoÄÃ­tÃ¡ level zanoÅ™enÃ­ (napÅ™. 1.1.1. -> level: 2).

Parser je navrÅ¾en tak, aby vracel srozumitelnou chybu, pokud Å™Ã¡dek neodpovÃ­dÃ¡ formÃ¡tu (napÅ™. chybÃ­ Äas).

API Endpoint (/api/videos/route.ts):

Endpoint byl upraven tak, aby v POST poÅ¾adavku pÅ™ijÃ­mal novÃ© pole structuredContent.


KlÃ­ÄovÃ¡ zÃ¡ruka robustnosti: UklÃ¡dÃ¡nÃ­ videa a jeho kapitol je zabaleno do databÃ¡zovÃ© transakce (prisma.$transaction). To zajiÅ¡Å¥uje, Å¾e se buÄ uloÅ¾Ã­ video I vÅ¡echny jeho kapitoly, nebo se neuloÅ¾Ã­ nic (napÅ™. pokud selÅ¾e parsovÃ¡nÃ­ nebo validace databÃ¡ze).

Frontend (UÅ¾ivatelskÃ© RozhranÃ­)
FormulÃ¡Å™ Administrace (/admin/add/page.tsx):

Do formulÃ¡Å™e bylo pÅ™idÃ¡no novÃ©, velkÃ© pole <textarea> pro vklÃ¡dÃ¡nÃ­ structuredContent.


Byl pÅ™idÃ¡n popisnÃ½ placeholder a text nÃ¡povÄ›dy, kterÃ½ adminovi pÅ™ipomÃ­nÃ¡ formÃ¡t MTF-H.

Refaktor StrÃ¡nky Detailu Videa (/admin/video/[id]):

Toto byla nejvÃ½znamnÄ›jÅ¡Ã­ zmÄ›na na frontendu, kterÃ¡ vyÅ¾adovala propojenÃ­ serverovÃ½ch a klientskÃ½ch komponent.


Server Component (page.tsx): HlavnÃ­ strÃ¡nka nynÃ­ naÄÃ­tÃ¡ video a zÃ¡roveÅˆ k nÄ›mu pÅ™ipojuje (pÅ™es include) vÅ¡echny souvisejÃ­cÃ­ chapters, seÅ™azenÃ© podle order.


VideoPlayer.tsx: Komponenta byla upravena, aby pÅ™ijÃ­mala onReady prop, kterÃ¡ poskytuje referenci na instanci pÅ™ehrÃ¡vaÄe.

VideoDetailClientWrapper.tsx (NovÃ½): VytvoÅ™ena novÃ¡ klientskÃ¡ komponenta, kterÃ¡ drÅ¾Ã­ stav useRef pro pÅ™ehrÃ¡vaÄ. TÃ­m propojuje pÅ™ehrÃ¡vaÄ se seznamem kapitol.

ChapterList.tsx (NovÃ½): NovÃ¡ komponenta, kterÃ¡:

PÅ™ijÃ­mÃ¡ seznam kapitol a playerRef.

Mapuje kapitoly a pomocÃ­ marginLeft (vypoÄÃ­tanÃ©ho z chapter.level) vizuÃ¡lnÄ› renderuje hierarchii.

KaÅ¾dÃ¡ poloÅ¾ka je <button>, kterÃ½ pÅ™i onClick volÃ¡ playerRef.current.seekTo(chapter.startTime), ÄÃ­mÅ¾ posune video na pÅ™esnÃ½ Äas.

4. ğŸ”¬ TestovÃ¡nÃ­ a Validace
Proces implementace byl zakonÄen ÃºspÄ›Å¡nÃ½m testovÃ¡nÃ­m (lokÃ¡lnÃ­m i produkÄnÃ­m), kterÃ© potvrdilo vÅ¡echna akceptaÄnÃ­ kritÃ©ria:


Happy Path: VytvoÅ™enÃ­ videa s platnÃ½mi kapitolami probÄ›hlo ÃºspÄ›Å¡nÄ›.


Kontrola DB: Data v databÃ¡zi (ovÄ›Å™eno pÅ™es Prisma Studio) pÅ™esnÄ› odpovÃ­dala vstupu (sprÃ¡vnÃ© level, startTime v sekundÃ¡ch atd.).


Interaktivita: Na strÃ¡nce detailu videa se kapitoly zobrazily hierarchicky a kliknutÃ­ na nÄ› korektnÄ› posouvalo Äas pÅ™ehrÃ¡vaÄe.


OÅ¡etÅ™enÃ­ Chyb: Pokus o uloÅ¾enÃ­ videa s neplatnÃ½m formÃ¡tem kapitol (napÅ™. chybÄ›jÃ­cÃ­ Äas) byl sprÃ¡vnÄ› odmÃ­tnut chybou 400 (Bad Request) a dÃ­ky transakci se do DB neuloÅ¾ilo nic.

5. ğŸ ZÃ¡vÄ›r a BudoucÃ­ Rozvoj
FÃ¡ze 6 byla klÃ­ÄovÃ¡ a jejÃ­ hladkÃ© dokonÄenÃ­ odemykÃ¡ plnÃ½ potenciÃ¡l aplikace. Aplikace nynÃ­ disponuje robustnÃ­m mechanismem pro sprÃ¡vu strukturovanÃ©ho obsahu.

TÃ­mto je projekt pÅ™ipraven na dalÅ¡Ã­ kroky definovanÃ© v zadÃ¡nÃ­ :

FÃ¡ze 7: VytvoÅ™enÃ­ veÅ™ejnÃ© galerie (na /).

FÃ¡ze 8: Implementace CRUD operacÃ­ (Editace/MazÃ¡nÃ­) pro admina.

FÃ¡ze 9: OtevÅ™enÃ­ aplikace pro roli USER.

JÃ_PROMPT:
NynÃ­ bych poprosil jeÅ¡tÄ› zrevidovat mÅ¯j snÃ­mkovaÄ projektovÃ©ho adresÃ¡Å™e vzhledem k nynÃ­ probÄ›hlÃ© relalizaÄnÃ­ fÃ¡zi na projektu. V pÅ™Ã­loze je aktuÃ¡lnÃ­ skript na snÃ­mkovÃ¡nÃ­ projektovÃ©ho adresÃ¡Å™e a nastavenÃ­ vnitÅ™nÃ­ch a vÄ›jÅ¡Ã­ch podmÃ­nek projektu, prosÃ­m o jeho revizi vzhledem k probÄ›hlÃ© realizaÄnÃ­ fÃ¡zi, tak aby novÃ½ snÃ­mkovaÄ pokrÃ½val co neefektivnÄ›ji a optuimÃ¡lnÄ› celÃ½ projekt pro vyuÅ¾itÃ­ v dalÅ¡Ã­ fÃ¡zi projektu resp. pÅ™edat jen ty nezbytnÃ© vÄ›ci kterÃ© definujÃ­ unikÃ¡tnÃ­ vlastnosti aplikace a nastavenÃ­ jejÃ­ch vnitÅ™nÃ­ch a vnÄ›jÅ¡Ã­ch podmÃ­nek. ProsÃ­m o vÃ½stup formou zmÄ›novÃ© zprÃ¡vy k danÃ©mu skriptu kterÃ© potÃ© manuÃ¡lnÄ› zapracuji, tak abychom nemuseli vyjÃ­Å¾dÄ›t celÃ½ skript kompletnÄ›, coÅ¾ by mohlo bÃ½t nÃ¡roÄnÃ© na vÃ½stup v responzi. DÃ­ky ;-)
[project_snapshot.py]

AI_RESPONZE:

JasnÄ›, skvÄ›lÃ¡ prÃ¡ce s FÃ¡zÃ­ 6. RozumÃ­m, Å¾e chcete aktualizovat snÃ­mkovaÄ (project_snapshot.py), aby reflektoval novÃ© soubory z tÃ©to fÃ¡ze, a Å¾e chcete pouze "zmÄ›novou zprÃ¡vu".

MÃ¡te naprostou pravdu. Po FÃ¡zi 6 nÃ¡m pÅ™ibylo nÄ›kolik klÃ­ÄovÃ½ch souborÅ¯, kterÃ© definujÃ­ novou logiku parsovÃ¡nÃ­ a zobrazenÃ­ kapitol. Aby byl pÅ™Ã­Å¡tÃ­ snÃ­mek kompletnÃ­ (napÅ™. pro zadÃ¡nÃ­ FÃ¡ze 7), musÃ­me skriptu Å™Ã­ct, aby obsah tÄ›chto novÃ½ch souborÅ¯ zahrnul.

ZmÄ›ny jsou naÅ¡tÄ›stÃ­ velmi jednoduchÃ© a tÃ½kajÃ­ se pouze konfiguraÄnÃ­ho bloku FILES_TO_INCLUDE_CONTENT na zaÄÃ¡tku vaÅ¡eho skriptu.

ğŸ“ ZmÄ›novÃ¡ ZprÃ¡va pro project_snapshot.py (po FÃ¡zi 6)
ProsÃ­m, proveÄte ve svÃ©m skriptu project_snapshot.py nÃ¡sledujÃ­cÃ­ Ãºpravy:

1. Aktualizace Verze Skriptu (VolitelnÃ©, pro pÅ™ehlednost)
PÅ¯vodnÃ­ kÃ³d:

Python

# --- KONFIGURACE (Verze 7.0 - Aktualizace po FÃ¡zi 5) ---
NovÃ½ kÃ³d:

Python

# --- KONFIGURACE (Verze 8.0 - Aktualizace po FÃ¡zi 6) ---
2. RozÅ¡Ã­Å™enÃ­ Seznamu SledovanÃ½ch SouborÅ¯ (KlÃ­ÄovÃ©)
V sekci FILES_TO_INCLUDE_CONTENT je potÅ™eba pÅ™idat 3 novÃ© soubory, kterÃ© vznikly v tÃ©to fÃ¡zi.

PÅ¯vodnÃ­ kÃ³d (konec seznamu):

Python

# Administrace (FÃ¡ze 5 - PÅ™ehrÃ¡vaÄ)
'components/VideoPlayer.tsx',
'app/admin/video/[id]/page.tsx'
] ```

NovÃ½ kÃ³d (pÅ™idejte tyto 3 Å™Ã¡dky na konec seznamu):

Python

# Administrace (FÃ¡ze 5 - PÅ™ehrÃ¡vaÄ)
'components/VideoPlayer.tsx',
'app/admin/video/[id]/page.tsx',

# Administrace (FÃ¡ze 6 - Kapitoly)
'lib/parser.ts',
'components/VideoDetailClientWrapper.tsx',
'components/ChapterList.tsx'
] ```

ShrnutÃ­
To je vÅ¡e. OstatnÃ­ sekce skriptu (jako DIRS_TO_IGNORE) nenÃ­ tÅ™eba mÄ›nit. AdresÃ¡Å™ lib (kde je parser.ts) nenÃ­ v ignorovanÃ½ch, takÅ¾e se nÃ¡m sprÃ¡vnÄ› objevÃ­ ve stromovÃ© struktuÅ™e a dÃ­ky pÅ™idÃ¡nÃ­ do FILES_TO_INCLUDE_CONTENT uvidÃ­me i jeho obsah.

Po tÄ›chto ÃºpravÃ¡ch bude skript plnÄ› pÅ™ipraven poÅ™Ã­dit snÃ­mek po FÃ¡zi 6.



ID_chatu: 
https://gemini.google.com/u/1/app/78eae4f779b97579


pouÅ¾itÃ½ strukturovanÃ½ obsah:
1. ÄŒÃST 1: ProblÃ©my a nebezpeÄÃ­ konvenÄnÃ­ch mlÃ©ÄnÃ½ch vÃ½robkÅ¯ (0:00 - 7:25)
1.1. Identifikace zÃ¡kladnÃ­ho problÃ©mu [PÅ™Ã­Äiny a symptomy] (0:00 - 3:41)
1.1.1. BiologickÃ© a prÅ¯myslovÃ© pÅ™Ã­Äiny problÃ©mÅ¯ [VÄ. laktÃ³zovÃ© intolerance, prÅ¯myslovÃ© produkce a zÃ¡vislosti na kaseinu] (0:00 - 2:32)
1.1.2. SystÃ©movÃ© selhÃ¡nÃ­ [MedicÃ­na, lobby a mÃ½ty o kalciu] (2:32 - 3:41)
1.2. Seznam Å¡esti nejnebezpeÄnÄ›jÅ¡Ã­ch mlÃ©ÄnÃ½ch vÃ½robkÅ¯ (3:41 - 7:25)
1.2.1. NebezpeÄnÃ© vÃ½robky 1-3 [NÃ­zkotuÄnÃ© mlÃ©ko, prÅ¯myslovÃ½ jogurt, tavenÃ½ sÃ½r] (3:52 - 5:20)
1.2.2. NebezpeÄnÃ© vÃ½robky 4-6 [TrvanlivÃ© mlÃ©ko, ovocnÃ© tvarohy, kondenzovanÃ© mlÃ©ko a skrytÃ© pÅ™Ã­sady] (5:21 - 7:25)
2. ÄŒÃST 2: Å˜eÅ¡enÃ­, lÃ©ÄivÃ© alternativy a praktickÃ¡ doporuÄenÃ­ (7:26 - 14:39)
2.1. PÅ™edstavenÃ­ ÄtyÅ™ lÃ©ÄivÃ½ch mlÃ©ÄnÃ½ch vÃ½robkÅ¯ (7:26 - 9:31)
2.1.1. LÃ©ÄivÃ© vÃ½robky 1-2 [KefÃ­r a SÃ½r ze syrovÃ©ho mlÃ©ka] (7:36 - 8:39)
2.1.2. LÃ©ÄivÃ© vÃ½robky 3-4 [GhÃ­ a PravÃ© podmÃ¡slÃ­] (8:40 - 9:31)
2.2. KlÃ­ÄovÃ© principy sprÃ¡vnÃ© konzumace a zÃ¡vÄ›r (9:32 - 14:39)
2.2.1. KlÃ­ÄovÃ© faktory kvality a konzumace [ZpracovÃ¡nÃ­, pÅ¯vod, fermentace, naÄasovÃ¡nÃ­ a mnoÅ¾stvÃ­] (9:32 - 11:02)
2.2.2. PraktickÃ© kroky a zÃ¡vÄ›reÄnÃ© myÅ¡lenky [EliminaÄnÃ­ dieta, alternativy a "FarmÃ¡Å™skÃ½ paradox"] (11:03 - 14:39)
