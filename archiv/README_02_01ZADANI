JÃ_PROMPT:
V pÅ™Ã­loze jsou vÃ½sledky z pÅ™edeÅ¡lÃ© fÃ¡ze realizace webovÃ© aplikace zamÄ›Å™enÃ© na sprÃ¡vu obsahu resp. primÃ¡rnÄ› videÃ­ z youtube resp.odkazÅ¯ na videa z youtube jako osobnÃ­ knihovny. MÃ¡ jÃ­t tedy o jakou osobnÃ­ sloÅ¾ku s videi na zÃ¡kladÄ› kterÃ½ch se bude generovat/Äi bude nejprve pÅ™idÃ¡vÃ¡n uÅ¾ivateli (napÅ™. pÅ™ehled obsahu videa s ÄasovÃ½mi znaÄkami kde je ve videu uvedeno) jejich obsah pro jejich a ostatnÃ­Ã¡ch uÅ¾ivatelÅ¯ snadnou orientaci ve videÃ­ch napÅ™. ve vzdÄ›lavacÃ­ch a podobnÃ½ch videÃ­ch. NynÃ­ prosÃ­m o vÃ½bÄ›r seznamÅ¯ vlastnostÃ­ kterÃ© by mohly bÃ½t nynÃ­ implementovÃ¡ny a jejich seÅ™azenÃ­ dle jejich relevance vzhledem k tomu co uÅ¾ bylo implementovÃ¡no (viz. dokumenty projektu v pÅ™Ã­loze), co je v pÅ™edchozÃ­ch zadÃ¡nÃ­ch plÃ¡novÃ¡no za dalÅ¡Ã­ kroky k implementaci a to jaÃ© je celÃ© vyznÄ›nÃ­ aplikace kterÃ© uvÃ¡dÃ­m v jednotlivÃ½ch dokumentech projektu . PotÃ© z nich jednu vyberu zÅ™ejmÄ› tu prvnÃ­ pro kterou vytvoÅ™Ã­me zadÃ¡nÃ­ pro realizaÄnÃ­ tÃ½m. DÃ­ky moc ;-)
[README_00_01ZADANI][README_00_02REALIZACE_Kick-off][README_01_01ZADANI][README_01_02REALIZACE]

AI_RESPONZE:
RozumÃ­m. SkvÄ›lÃ¡ prÃ¡ce na dokonÄenÃ­ FÃ¡ze 2! NynÃ­ mÃ¡me plnÄ› funkÄnÃ­ systÃ©m pro sprÃ¡vu uÅ¾ivatelÅ¯, role (vÄetnÄ› ADMINA) a databÃ¡zi. To je perfektnÃ­ odrazovÃ½ mÅ¯stek.


VÃ¡Å¡ cÃ­l je jasnÃ½: aplikace mÃ¡ bÃ½t galeriÃ­ kurÃ¡torovanÃ©ho obsahu (nejprve vÃ¡mi jako adminem, pozdÄ›ji i uÅ¾ivateli)  a klÃ­Äovou hodnotou je pÅ™idanÃ½ obsah, jako jsou ÄasovÃ© znaÄky pro snadnou orientaci [prompt].



Na zÃ¡kladÄ› tohoto cÃ­le a toho, co je jiÅ¾ hotovo (FÃ¡ze 1 a 2), jsem pÅ™ipravil seznam nÃ¡sledujÃ­cÃ­ch krokÅ¯. Jsou seÅ™azeny podle priority tak, aby kaÅ¾dÃ¡ fÃ¡ze logicky navazovala na tu pÅ™edchozÃ­ a co nejrychleji pÅ™inÃ¡Å¡ela viditelnou hodnotu.

ğŸ›ï¸ Seznam NÃ¡sledujÃ­cÃ­ch FunkcÃ­ (SeÅ™azeno dle Priority)
Zde je pÅ™ehled implementaÄnÃ­ch balÃ­ÄkÅ¯, kterÃ© navazujÃ­ na hotovÃ½ autentizaÄnÃ­ systÃ©m.

1. SprÃ¡va Obsahu pro AdministrÃ¡tora (PÅ™idÃ¡nÃ­/Editace Videa)
Popis: VytvoÅ™enÃ­ zÃ¡kladnÃ­ho rozhranÃ­ (formulÃ¡Å™e) pÅ™Ã­stupnÃ©ho pouze pro roli ADMIN. Toto rozhranÃ­ umoÅ¾nÃ­ administrÃ¡torovi (vÃ¡m) vloÅ¾it URL YouTube videa a pÅ™idat k nÄ›mu zÃ¡kladnÃ­ metadata (napÅ™. vlastnÃ­ nÃ¡zev, popis). TÃ­m se naplnÃ­ databÃ¡ze prvnÃ­m obsahem.

ProÄ je to priorita: Toto je naprosto klÃ­ÄovÃ½ a logickÃ½ dalÅ¡Ã­ krok. MÃ¡me systÃ©m rolÃ­, ale role ADMIN zatÃ­m nemÃ¡ Å¾Ã¡dnou speciÃ¡lnÃ­ funkci. MÃ¡me databÃ¡zi, ale jen s tabulkou User. Tato funkce implementuje prvnÃ­ ÄÃ¡st vaÅ¡Ã­ vize â€“ vy jako prvnÃ­ kurÃ¡tor. Bez obsahu v databÃ¡zi nemÅ¯Å¾eme nic zobrazovat.






NÃ¡vaznost na hotovou FÃ¡zi 2: PÅ™Ã­mo vyuÅ¾Ã­vÃ¡ existujÃ­cÃ­ ADMIN roli z databÃ¡ze a chrÃ¡nÃ­ novÃ© administrÃ¡torskÃ© strÃ¡nky pomocÃ­ stejnÃ©ho principu jako /dashboard. VyÅ¾aduje rozÅ¡Ã­Å™enÃ­ schema.prisma o novÃ½ model (napÅ™. Video).



2. VeÅ™ejnÃ¡ Galerie VideÃ­ (ZobrazenÃ­ Obsahu)
Popis: Ãšprava hlavnÃ­ (domovskÃ©) strÃ¡nky tak, aby zobrazovala vÅ¡echna videa pÅ™idanÃ¡ administrÃ¡torem. Mohlo by jÃ­t o mÅ™Ã­Å¾ku karet, kde kaÅ¾dÃ¡ karta reprezentuje jedno video (nÃ¡hledovÃ½ obrÃ¡zek, nÃ¡zev, popis).

ProÄ je to priorita: Jakmile je v databÃ¡zi obsah (dÃ­ky Kroku 1), musÃ­ bÃ½t okamÅ¾itÄ› vidÄ›t pro veÅ™ejnÃ©, anonymnÃ­ uÅ¾ivatele. TÃ­m se naplnÃ­ vize "vÃ½kladnÃ­ skÅ™Ã­nÄ›" nebo "galerie videÃ­". Aplikace tÃ­m zÃ­skÃ¡ svÅ¯j primÃ¡rnÃ­ smysl pro nÃ¡vÅ¡tÄ›vnÃ­ky.



NÃ¡vaznost na hotovou FÃ¡zi 2: Toto bude veÅ™ejnÃ¡ strÃ¡nka (jako /login nebo /register ), kterÃ¡ nepotÅ™ebuje pÅ™ihlÃ¡Å¡enÃ­, ale bude ÄÃ­st data z databÃ¡ze, kterou jsme ve FÃ¡zi 2 pÅ™ipojili.




3. StrÃ¡nka Detailu Videa a PÅ™ehrÃ¡vaÄ
Popis: VytvoÅ™enÃ­ dynamickÃ© strÃ¡nky (napÅ™. /video/[id]). KdyÅ¾ uÅ¾ivatel klikne na video v galerii (Krok 2), dostane se sem. Tato strÃ¡nka zobrazÃ­ vloÅ¾enÃ½ YouTube pÅ™ehrÃ¡vaÄ a vÅ¡echna metadata videa.

ProÄ je to priorita: UzavÃ­rÃ¡ zÃ¡kladnÃ­ uÅ¾ivatelskÃ½ cyklus: UÅ¾ivatel vidÃ­ galerii -> klikne na video -> pÅ™ehraje si video. DÅ¯leÅ¾itÄ›jÅ¡Ã­ ale je, Å¾e tato strÃ¡nka se stane kontejnerem pro vaÅ¡i klÃ­Äovou funkci â€“ zobrazenÃ­ obsahu s ÄasovÃ½mi znaÄkami.


NÃ¡vaznost na hotovou FÃ¡zi 2: VyuÅ¾Ã­vÃ¡ stejnÃ½ technologickÃ½ stack (Next.js App Router, Prisma pro naÄtenÃ­ dat).



4. Implementace SprÃ¡vy Obsahu (ÄŒasovÃ© ZnaÄky)
Popis: RozÅ¡Ã­Å™enÃ­ administrÃ¡torskÃ©ho rozhranÃ­ (z Kroku 1) a databÃ¡ze tak, aby mohl administrÃ¡tor k videu pÅ™idÃ¡vat strukturovanÃ½ obsah â€“ konkrÃ©tnÄ› seznam kapitol s ÄasovÃ½mi znaÄkami a popisem. Tento obsah se pak zobrazÃ­ na strÃ¡nce detailu videa (Krok 3), ideÃ¡lnÄ› interaktivnÄ› (kliknutÃ­ na znaÄku posune video).

ProÄ je to priorita: Toto je vaÅ¡e hlavnÃ­ konkurenÄnÃ­ vÃ½hoda a jÃ¡dro myÅ¡lenky celÃ© aplikace, jak jste sÃ¡m popsal [prompt]. Aplikace pÅ™estÃ¡vÃ¡ bÃ½t jen "seznamem odkazÅ¯" a stÃ¡vÃ¡ se skuteÄnÃ½m nÃ¡strojem pro orientaci ve videÃ­ch.


NÃ¡vaznost na hotovou FÃ¡zi 2: VyÅ¾aduje dalÅ¡Ã­ rozÅ¡Ã­Å™enÃ­ databÃ¡zovÃ©ho schÃ©matu (napÅ™. model Chapter propojenÃ½ s modelem Video), coÅ¾ stavÃ­ na nÃ¡stroji Prisma, kterÃ½ jsme jiÅ¾ zavedli a odladili .


5. OsobnÃ­ Knihovny UÅ¾ivatelÅ¯
Popis: UmoÅ¾nit pÅ™ihlÃ¡Å¡enÃ½m uÅ¾ivatelÅ¯m (role USER) vytvÃ¡Å™et si vlastnÃ­ sbÃ­rky. To mÅ¯Å¾e bÃ½t buÄ "olajkovÃ¡nÃ­m" videÃ­ z hlavnÃ­ galerie, nebo (jako vÄ›tÅ¡Ã­ krok) umoÅ¾nÄ›nÃ­ jim pÅ™idÃ¡vat vlastnÃ­ YouTube videa do jejich soukromÃ© sekce.


ProÄ je to priorita: Toto je druhÃ½ pilÃ­Å™ vaÅ¡Ã­ vize â€“ uÅ¾ivatelÃ© jako kurÃ¡toÅ™i. TÃ­m se plnÄ› vyuÅ¾ije potenciÃ¡l autentizaÄnÃ­ho systÃ©mu z FÃ¡ze 2. Je to ale aÅ¾ po KrocÃ­ch 1-4, protoÅ¾e nejprve musÃ­me mÃ­t funkÄnÃ­ systÃ©m sprÃ¡vy obsahu jako takovÃ½ (Admin -> VeÅ™ejnost).




NÃ¡vaznost na hotovou FÃ¡zi 2: PÅ™Ã­mo vyuÅ¾Ã­vÃ¡ hotovÃ½ systÃ©m pÅ™ihlÃ¡Å¡enÃ­, chrÃ¡nÄ›nou strÃ¡nku /dashboard  a existujÃ­cÃ­ User model, ke kterÃ©mu by se vÃ¡zaly uÅ¾ivatelskÃ© sbÃ­rky.


DoporuÄuji postupovat pÅ™esnÄ› v tomto poÅ™adÃ­. PrvnÃ­ krok, "SprÃ¡va Obsahu pro AdministrÃ¡tora", je teÄ nejdÅ¯leÅ¾itÄ›jÅ¡Ã­, protoÅ¾e odemykÃ¡ vÅ¡echny ostatnÃ­ funkce spojenÃ© s obsahem.

Mohu tedy pÅ™ipravit podrobnÃ© zadÃ¡nÃ­ pro realizaÄnÃ­ tÃ½m pro implementaÄnÃ­ bod Ä. 1?




JÃ_PROMPT:
Ano pojdme vytvoÅ™it zadÃ¡nÃ­ pro realizaÄnÃ­ tÃ½m v tomto implementaÄnÃ­m bodÄ› [1. SprÃ¡va Obsahu pro AdministrÃ¡tora (PÅ™idÃ¡nÃ­/Editace Videa)

Popis: VytvoÅ™enÃ­ zÃ¡kladnÃ­ho rozhranÃ­ (formulÃ¡Å™e) pÅ™Ã­stupnÃ©ho pouze pro roli ADMIN. Toto rozhranÃ­ umoÅ¾nÃ­ administrÃ¡torovi (vÃ¡m) vloÅ¾it URL YouTube videa a pÅ™idat k nÄ›mu zÃ¡kladnÃ­ metadata (napÅ™. vlastnÃ­ nÃ¡zev, popis). TÃ­m se naplnÃ­ databÃ¡ze prvnÃ­m obsahem.

ProÄ je to priorita: Toto je naprosto klÃ­ÄovÃ½ a logickÃ½ dalÅ¡Ã­ krok. MÃ¡me systÃ©m rolÃ­, ale role ADMIN zatÃ­m nemÃ¡ Å¾Ã¡dnou speciÃ¡lnÃ­ funkci. MÃ¡me databÃ¡zi, ale jen s tabulkou User. Tato funkce implementuje prvnÃ­ ÄÃ¡st vaÅ¡Ã­ vize â€“ vy jako prvnÃ­ kurÃ¡tor. Bez obsahu v databÃ¡zi nemÅ¯Å¾eme nic zobrazovat.

NÃ¡vaznost na hotovou FÃ¡zi 2: PÅ™Ã­mo vyuÅ¾Ã­vÃ¡ existujÃ­cÃ­ ADMIN roli z databÃ¡ze a chrÃ¡nÃ­ novÃ© administrÃ¡torskÃ© strÃ¡nky pomocÃ­ stejnÃ©ho principu jako /dashboard. VyÅ¾aduje rozÅ¡Ã­Å™enÃ­ schema.prisma o novÃ½ model (napÅ™. Video).] ProsÃ­m o pÅ™Ã­pravu ve struktuÅ™e bÄ›Å¾nou pro zadÃ¡nÃ­ (napÅ™. i dle struktury souborÅ¯ z pÅ™edeÅ¡lÃ½ch fÃ¡zÃ­ [README_00_01ZADANI, README_00_01ZADANI]) pÅ™Ã­padnÄ› s dalÅ¡Ã­mi vylepÅ¡enÃ­mi pro tento typ dokumentu. V budoucÃ­ aplikaci bude nejprve kurÃ¡torovanÃ½ seznam videÃ­ vytvÃ¡Å™enÃ½ pouze administrÃ¡torem (resp. mnou) ale do budoucna budou moci pÅ™idÃ¡vat videa i sami uÅ¾ivatelÃ© a generovat pro nÄ› obsahy. Ano, aplikace by mÄ›la bÃ½t vlastnÄ› jakÃ¡sÃ­ pÅ™ehlÃ­dka videÃ­ a jejich prezentace obsahu ()pÅ™ehled obsahu videa jako obsah knihy s ÄasovÃ½mi znaÄkami resp. takovÃ¡ galerie videÃ­ jinak je uÅ¾ivatel odkÃ¡zÃ¡n v podstatÄ› na nepÅ™ebernÃ© neuspoÅ™Ã¡danÃ© mnoÅ¾stvÃ­ videÃ­ na internetu resp. youtube , tÃ­mto zpÅ¯sobem by mÄ›l zÃ­skÃ¡vat rychlÃ½ pÅ™ehled o obsahu a takÃ© by do budoucna mohlo bÃ½t moÅ¾nÃ© sledovat co jsem jiÅ¾ prohlÃ©dl ve videÃ­ch abych mÄ›l pÅ™ehled jak jsem danÃ½ obsah jiÅ¾ shlÃ©dl jako uÅ¾ivatel. JistÄ› kaÅ¾dÃ½ uÅ¾ivatel mÃ¡ Äi potencielnÄ› chce mÃ­t svou sbÃ­rku videÃ­ se kterou se chce pochlubit vÄetnÄ› jejÃ­ch uspoÅ™Ã¡danÃ½ch obsahÅ¯. Toto je myslÃ­m docela zajÃ­mavÃ¡ oblast pro tuto aplikaci. RovnÄ›Å¾ si pÅ™edstavuji Å¾e bude moÅ¾nÃ© z obsahÅ¯ videÃ­ vytvÃ¡Å™et samostantnÃ© textovÃ© obsahy kterÃ© budou kompilovat obsahy jednotliÃ½ch videÃ­ do jednoho celku a tento kompilovanÃ½ obsah se potÃ© bude moci odkazovat na jednotlivÃ¡ videa. TÃ­mto zpÅ¯sobm budou moci vznikat i ÄlÃ¡nky Äi knihy kterÃ© budou souhrnnÄ› pojednÃ¡vat o jistÃ© skupinÄ› videÃ­ a tÃ­mto zpÅ¯sobem poskytnou uÅ¾ivateli nadhled i nad vÄ›tÅ¡Ã­ skupinou videÃ­ najednou. UÅ¾ivatel se bude moci pak dÃ¡le noÅ™it do kompilovanÃ©ho obsahu a dany obsah tÃ­mto zpÅ¯sobem prozkoumÃ¡vat. TakovÃ¡ defakto televiznÃ­ spoleÄnost tvoÅ™enÃ¡ kuratorstvÃ­m jejich uÅ¾ivatelÅ¯. PrvnÃ­m kurÃ¡torem bude vÅ¡ak admin tedy jÃ¡. PostupnÄ› se kurÃ¡torstvÃ­ rozÅ¡Ã­Å™Ã­ i na uÅ¾ivatele a budou si moci vytvÃ¡Å™et svou knihovnu videÃ­ a sdÃ­let ji s ostatnÃ­mi. ;) NynÃ­ pojdme umoÅ¾nit tedy pÅ™ihlÃ¡Å¡enÃ©mu administrÃ¡torovi vytvÃ¡Å™et seznam jeho videÃ­ a nÄ›jakÃ¡ zÃ¡kladnÃ­ metadata jako je nÃ¡zev videa a jeho struÄnÃ½ popis, kterÃ©/kterÃ½ vloÅ¾Ã­ manuÃ¡lnÄ›. Tento struÄnÃ½ popis/sumarizaci videa vytvoÅ™Ã­ admin vytvoÅ™Ã­ takÃ© manuÃ¡lnÄ› pomocÃ­ chytu s AI na zÃ¡kladÄ› pÅ™episu videa z Youtube. Do budoucna budou moci pÅ™idÃ¡vat podobnÄ› videa i uÅ¾ivatelÃ©. ProsÃ­m o nÄ›jakÃ½ zÃ¡kladnÃ­ nÃ¡vrh Å™eÅ¡enÃ­ pro zde generovanÃ© zadÃ¡nÃ­ tohoto Ãºkolu pÅ™ipadnÄ› dalÅ¡Ã­ moÅ¾nosti na vylepÅ¡enÃ­ tohoto zadÃ¡nÃ­ pro fÃ¡zi 3. ;-)

AI_RESPONZE:
istÄ›, tady je podrobnÃ½ nÃ¡vrh zadÃ¡nÃ­ pro realizaÄnÃ­ tÃ½m.

PlnÄ› jsem zohlednil vaÅ¡i vizi aplikace jako kurÃ¡torovanÃ© galerie s pÅ™idanou hodnotou (obsahy, ÄasovÃ© znaÄky) a budoucÃ­m cÃ­lem kompilace obsahu napÅ™Ã­Ä videi. Tato fÃ¡ze 3 je prvnÃ­m krokem k naplnÄ›nÃ­ tÃ©to vize tÃ­m, Å¾e vÃ¡m, jako prvnÃ­mu kurÃ¡torovi, dÃ¡vÃ¡ nÃ¡stroje k naplnÄ›nÃ­ databÃ¡ze.

ğŸ“„ ZadÃ¡nÃ­ projektu: WebovÃ¡ aplikace Mediathek (FÃ¡ze 3 - SprÃ¡va Obsahu AdministrÃ¡torem)
Datum: 4. listopadu 2025 Verze: 3.0

1. NÃ¡zev projektu
Mediathek 

2. CÃ­l FÃ¡ze
CÃ­lem tÃ©to fÃ¡ze je implementovat prvnÃ­ klÃ­Äovou funkci aplikace: rozhranÃ­ pro sprÃ¡vu obsahu. V nÃ¡vaznosti na FÃ¡zi 2, kde byly definovÃ¡ny uÅ¾ivatelskÃ© role, tato fÃ¡ze zpÅ™Ã­stupnÃ­ zabezpeÄenou sekci pouze pro administrÃ¡tory (role ADMIN).

Toto rozhranÃ­ umoÅ¾nÃ­ administrÃ¡torovi (prvnÃ­mu kurÃ¡torovi) [prompt] zaÄÃ­t plnit databÃ¡zi videi a pÅ™ipravit tak obsah, kterÃ½ bude v dalÅ¡Ã­ fÃ¡zi zobrazen veÅ™ejnosti.

3. Rozsah pro FÃ¡zi 3
DatabÃ¡ze: RozÅ¡Ã­Å™enÃ­ databÃ¡zovÃ©ho schÃ©matu (Prisma) o novÃ½ model pro uklÃ¡dÃ¡nÃ­ videÃ­.

Backend: VytvoÅ™enÃ­ zabezpeÄenÃ©ho API endpointu pro pÅ™Ã­jem a uklÃ¡dÃ¡nÃ­ dat o novÃ½ch videÃ­ch.

Frontend: VytvoÅ™enÃ­ novÃ©, chrÃ¡nÄ›nÃ© strÃ¡nky (formulÃ¡Å™e) v app/ adresÃ¡Å™i, pÅ™Ã­stupnÃ© pouze administrÃ¡torÅ¯m.

UI/Navigace: Aktualizace navigaÄnÃ­ liÅ¡ty (Navbar.tsx) tak, aby dynamicky zobrazovala odkaz do administrace pouze oprÃ¡vnÄ›nÃ½m uÅ¾ivatelÅ¯m.

Mimo rozsah tÃ©to fÃ¡ze: VeÅ™ejnÃ© zobrazenÃ­ videÃ­ (to bude FÃ¡ze 4), automatickÃ¡ extrakce metadat z YouTube, automatickÃ¡ generace shrnutÃ­.

4. NÃ¡vrh Å˜eÅ¡enÃ­ a Architektura
Toto je doporuÄenÃ½ technickÃ½ pÅ™Ã­stup k implementaci:

DatabÃ¡zovÃ½ Model (Prisma):

Soubor prisma/schema.prisma bude rozÅ¡Ã­Å™en o novÃ½ model, napÅ™. Video.

Tento model musÃ­ bÃ½t propojen (relation) s modelem User, aby bylo jasnÃ©, kterÃ½ uÅ¾ivatel (autor) video pÅ™idal.

NavrhovanÃ© schÃ©ma Video:

Fragment kÃ³du

model Video {
  id          String   @id @default(cuid())
  youtubeId   String   @unique // ID videa z URL (napÅ™. "dQw4w9WgXcQ")
  title       String   // ManuÃ¡lnÄ› zadanÃ½ nÃ¡zev [prompt]
  summary     String   @db.Text // ManuÃ¡lnÄ› zadanÃ© shrnutÃ­ (delÅ¡Ã­ text) [prompt]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // PropojenÃ­ na autora
  authorId    String
  author      User     @relation(fields: [authorId], references: [id])
}

// V modelu User je tÅ™eba pÅ™idat zpÄ›tnou vazbu:
model User {
  // ... stÃ¡vajÃ­cÃ­ pole
  videos   Video[] // Seznam videÃ­ pÅ™idanÃ½ch tÃ­mto uÅ¾ivatelem
}
Po ÃºpravÄ› schÃ©matu bude nutnÃ© spustit migraci: npm run prisma:migrate (nebo npx prisma migrate dev s dotenv-cli dle nastavenÃ­ z FÃ¡ze 2).

ZabezpeÄenÃ­ (Middleware a UI):


Navigace: Soubor components/Navbar.tsx  bude upraven. PomocÃ­ hooku useSession z next-auth/react zÃ­skÃ¡ data o sezenÃ­. PÅ™idÃ¡ podmÃ­nÄ›nÃ© zobrazenÃ­ odkazu:

{session?.user?.role === 'ADMIN' && (<Link href="/admin">Administrace</Link>)}


Middleware: Soubor middleware.ts  bude rozÅ¡Ã­Å™en, aby chrÃ¡nil vÅ¡echny trasy pod /admin. Je tÅ™eba nejen ovÄ›Å™it pÅ™ihlÃ¡Å¡enÃ­, ale i roli.


DoporuÄenÃ¡ Ãºprava: V app/api/auth/[...nextauth]/route.ts zajistit, Å¾e role je vloÅ¾ena do session i token .


V middleware.ts pouÅ¾Ã­t withAuth callback pro ovÄ›Å™enÃ­ role:

TypeScript

import { withAuth } from "next-auth/middleware";

export default withAuth(
  function middleware(req) {
    // Tato funkce se volÃ¡ jen pro pÅ™ihlÃ¡Å¡enÃ© uÅ¾ivatele
  },
  {
    callbacks: {
      authorized: ({ token }) => {
        // ChrÃ¡nÄ›nÃ© trasy vyÅ¾adujÃ­ roli ADMIN
        return token?.role === "ADMIN";
      }
    }
  }
);

export const config = {
  matcher: ["/admin/:path*"], // ChrÃ¡nit vÅ¡e pod /admin
};
Frontend (Admin FormulÃ¡Å™):

VytvoÅ™it novou strÃ¡nku, napÅ™. app/admin/add/page.tsx.

Tato strÃ¡nka bude obsahovat formulÃ¡Å™ (<form>) s poli:

input type="text" pro YouTube URL.

input type="text" pro NÃ¡zev videa [prompt].

textarea pro ShrnutÃ­ videa (sem admin vloÅ¾Ã­ manuÃ¡lnÄ› vytvoÅ™enÃ½ text) [prompt].

FormulÃ¡Å™ bude data odesÃ­lat (napÅ™. pomocÃ­ fetch nebo axios) na novÃ½ API endpoint.

Backend (API Endpoint):

VytvoÅ™it soubor app/api/videos/route.ts.

Implementovat POST handler, kterÃ½:

ZÃ­skÃ¡ sezenÃ­ server-side (pomocÃ­ authOptions z FÃ¡ze 2).

OvÄ›Å™Ã­, Å¾e session.user.role === 'ADMIN'. Pokud ne, vrÃ¡tÃ­ 403 Forbidden.

Zpracuje data z frontendu (await request.json()).

DoporuÄenÃ­: Z plnÃ© YouTube URL extrahuje pouze ID videa (napÅ™. z watch?v=VIDEO_ID nebo youtu.be/VIDEO_ID).

UloÅ¾Ã­ data do databÃ¡ze pomocÃ­ Prisma:

TypeScript

await prisma.video.create({
  data: {
    youtubeId: extractedVideoId,
    title: body.title,
    summary: body.summary,
    authorId: session.user.id, // PropojenÃ­ na admina
  }
});
VrÃ¡tÃ­ 201 Created odpovÄ›Ä.

5. FunkÄnÃ­ PoÅ¾adavky (FR)
FR1 (DB SchÃ©ma): V databÃ¡zi musÃ­ existovat novÃ¡ tabulka (model) Video propojenÃ¡ vztahem "jeden-ku-mnoha" s tabulkou User.

FR2 (Admin Navigace): UÅ¾ivatel pÅ™ihlÃ¡Å¡enÃ½ s rolÃ­ ADMIN musÃ­ v hlavnÃ­ navigaci vidÄ›t odkaz do administrÃ¡torskÃ© sekce [prompt].

FR3 (User Navigace): UÅ¾ivatel pÅ™ihlÃ¡Å¡enÃ½ s rolÃ­ USER (nebo nepÅ™ihlÃ¡Å¡enÃ½) nesmÃ­ tento odkaz vidÄ›t.

FR4 (PÅ™Ã­stup do Administrace): StrÃ¡nka (napÅ™. /admin/add) musÃ­ bÃ½t pÅ™Ã­stupnÃ¡ pouze pÅ™ihlÃ¡Å¡enÃ©mu ADMIN uÅ¾ivateli. JakÃ½koliv jinÃ½ uÅ¾ivatel (vÄetnÄ› USER) musÃ­ bÃ½t pÅ™i pokusu o pÅ™Ã­stup pÅ™esmÄ›rovÃ¡n (napÅ™. na domovskou strÃ¡nku nebo /login).

FR5 (FormulÃ¡Å™): Na administrÃ¡torskÃ© strÃ¡nce musÃ­ bÃ½t formulÃ¡Å™ pro zadÃ¡nÃ­ YouTube URL, nÃ¡zvu a textovÃ©ho shrnutÃ­ [prompt].

FR6 (UklÃ¡dÃ¡nÃ­ Dat): ÃšspÄ›Å¡nÃ© odeslÃ¡nÃ­ formulÃ¡Å™e musÃ­ vytvoÅ™it novÃ½ zÃ¡znam v tabulce Video a sprÃ¡vnÄ› jej propojit s ID pÅ™ihlÃ¡Å¡enÃ©ho administrÃ¡tora [prompt].

6. NefunkÄnÃ­ PoÅ¾adavky (NFR)
NFR1 (ZabezpeÄenÃ­ API): API endpoint (/api/videos) musÃ­ striktnÄ› ovÄ›Å™ovat roli uÅ¾ivatele na stranÄ› serveru. NesmÃ­ bÃ½t moÅ¾nÃ©, aby USER odeslal data, i kdyby endpoint uhodl.

NFR2 (Validace Vstupu): MusÃ­ bÃ½t implementovÃ¡na zÃ¡kladnÃ­ validace (na klientu i serveru), Å¾e povinnÃ¡ pole (URL, NÃ¡zev) nejsou prÃ¡zdnÃ¡.

NFR3 (ZpÄ›tnÃ¡ Vazba): FormulÃ¡Å™ musÃ­ administrÃ¡torovi poskytnout jasnou zpÄ›tnou vazbu o ÃºspÄ›chu ("Video pÅ™idÃ¡no") nebo neÃºspÄ›chu ("DoÅ¡lo k chybÄ›").

7. TechnologickÃ½ Stack a NÃ¡stroje
VyuÅ¾Ã­vÃ¡ se stÃ¡vajÃ­cÃ­ stack: Next.js (App Router) , Prisma , NextAuth.js , Vercel Postgres , Tailwind CSS. Nejsou potÅ™eba Å¾Ã¡dnÃ© novÃ© klÃ­ÄovÃ© knihovny.



8. AkceptaÄnÃ­ Kriteria (Definice "Hotovo")
Tato fÃ¡ze je dokonÄena, kdyÅ¾:

DatabÃ¡zovÃ¡ migrace pro model Video ÃºspÄ›Å¡nÄ› probÄ›hla na lokÃ¡lnÃ­m i produkÄnÃ­m (Vercel) prostÅ™edÃ­.

Po pÅ™ihlÃ¡Å¡enÃ­ jako ADMIN je v Navbar viditelnÃ½ odkaz "Administrace".

Po pÅ™ihlÃ¡Å¡enÃ­ jako USER tento odkaz nenÃ­ viditelnÃ½.

PÅ™Ã­mÃ½ pÅ™Ã­stup na /admin/add jako USER selÅ¾e (pÅ™esmÄ›ruje).

PÅ™Ã­mÃ½ pÅ™Ã­stup na /admin/add jako ADMIN ÃºspÄ›Å¡nÄ› zobrazÃ­ formulÃ¡Å™.

OdeslÃ¡nÃ­ formulÃ¡Å™e s daty vytvoÅ™Ã­ novÃ½ zÃ¡znam v databÃ¡zi (ovÄ›Å™itelnÃ© napÅ™. pÅ™es npx prisma studio).

VytvoÅ™enÃ½ zÃ¡znam v tabulce Video mÃ¡ ve sloupci authorId sprÃ¡vnÃ© ID administrÃ¡tora.

VeÅ¡kerÃ½ kÃ³d je nahrÃ¡n do main vÄ›tve a ÃºspÄ›Å¡nÄ› nasazen na Vercel .

9. BudoucÃ­ Rozvoj (Mimo Rozsah TÃ©to FÃ¡ze)
FÃ¡ze 4: ZobrazenÃ­ tÄ›chto pÅ™idanÃ½ch videÃ­ na veÅ™ejnÃ© domovskÃ© strÃ¡nce (vytvoÅ™enÃ­ "galerie") [prompt].

FÃ¡ze 5: VytvoÅ™enÃ­ strÃ¡nky detailu videa s pÅ™ehrÃ¡vaÄem.

FÃ¡ze 6: RozÅ¡Ã­Å™enÃ­ databÃ¡ze a formulÃ¡Å™e o pÅ™idÃ¡vÃ¡nÃ­ strukturovanÃ©ho obsahu (ÄasovÃ© znaÄky) [prompt].

FÃ¡ze 7: UmoÅ¾nÄ›nÃ­ uÅ¾ivatelÅ¯m (roli USER) pÅ™idÃ¡vat vlastnÃ­ videa do svÃ½ch soukromÃ½ch knihoven [prompt].

Budoucnost: Kompilace obsahÅ¯ z vÃ­ce videÃ­ do souhrnnÃ½ch ÄlÃ¡nkÅ¯ [prompt].

Mohu nynÃ­ na zÃ¡kladÄ› tohoto zadÃ¡nÃ­ pÅ™ipravit podrobnÃ½ realizaÄnÃ­ plÃ¡n, vÄetnÄ› konkrÃ©tnÃ­ch pÅ™Ã­kazÅ¯ a Ãºprav kÃ³du, podobnÄ› jako v pÅ™edchozÃ­ch fÃ¡zÃ­ch?


id_chat: https://gemini.google.com/u/1/app/212346a5afc9c956
