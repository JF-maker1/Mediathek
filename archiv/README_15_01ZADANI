JÃ_PROMPT:
Ano pojdme do vytvoÅ™enÃ­ komletnÃ­ho zadÃ¡nÃ­ pro novou editaci sbÃ­rky na svÃ© vlastnÃ­ strÃ¡nce "Editace sbÃ­rky" a i vÄetnÄ› Ãºpravy souÄasnÃ© strÃ¡nky "SbÃ­rky" do novÃ© strÃ¡nky ""SprÃ¡va SbÃ­rek" resp. Ãºzce to souvisÃ­ s pÅ™Ã­stupem na jednotlivÃ© strÃ¡nky "Editace sbÃ­rky". Vzorem by mÄ›la bÃ½t architektura tÄ›chto strÃ¡nek pro videa coÅ¾ by mÄ›lo bÃ½t implementaÄbnÃ­m poÅ¾adavkem - zde je to defacto sprÃ¡va obsahu na Ãºrovni ne vieÃ­ ale sbÃ­rek - nenÃ­ dÅ¯vod aby se architektura Å™eÅ¡enÃ­ odliÅ¡ovala od Å™eÅ¡enÃ­ jednotlivÃ½ch videi ... pojdme na to ;-) ProsÃ­m tedy o zprÃ¡vu o genezi zadÃ¡nÃ­ i samotnÃ© zadÃ¡nÃ­ souÄasnÃ© fÃ¡ze 15 ;-)

AI_RESPONZE:

RozumÃ­m. Toto je velmi rozumnÃ© a architektonicky ÄistÃ© rozhodnutÃ­.

SjednocenÃ­ architektury pro **Videa** a **SbÃ­rky** (tj. vzor `PÅ™ehled/Tabulka` -\> `Detail/Editace`) pÅ™inese do aplikace Å™Ã¡d a vÃ½raznÄ› zjednoduÅ¡Ã­ budoucÃ­ ÃºdrÅ¾bu i pouÅ¾Ã­vÃ¡nÃ­. Pokud uÅ¾ivatel (nebo budoucÃ­ kurÃ¡tor) umÃ­ ovlÃ¡dat videa, bude okamÅ¾itÄ› umÄ›t ovlÃ¡dat i sbÃ­rky.

TÃ­m, Å¾e se soustÅ™edÃ­me na **"VyzrÃ¡vÃ¡nÃ­ SbÃ­rek"** a implementujeme AI generovÃ¡nÃ­ jejich popisÅ¯ z obsahu videÃ­ ("Bottom-Up"), dÃ¡vÃ¡me sbÃ­rkÃ¡m skuteÄnou informaÄnÃ­ hodnotu, kterÃ¡ bude klÃ­ÄovÃ¡ pro budoucÃ­ veÅ™ejnou prezentaci.

Zde je kompletnÃ­ dokumentace pro FÃ¡zi 15.

-----

# README\_15\_01ZADANI

## ğŸ“œ ZprÃ¡va o genezi zadÃ¡nÃ­ (Development Report)

**TÃ©ma:** FÃ¡ze 15 â€“ EkosystÃ©m SbÃ­rek (Architektura a Kontext)
**Datum vzniku:** 30. listopadu 2025
**Kontext:** Aplikace mÃ¡ robustnÃ­ sprÃ¡vu videÃ­ (FÃ¡ze 6), ale sprÃ¡va sbÃ­rek (FÃ¡ze 7) zÅ¯stala v zÃ¡rodeÄnÃ© fÃ¡zi (jen zÃ¡kladnÃ­ vytvoÅ™enÃ­). Pro naplnÄ›nÃ­ vize "knihovny" je nutnÃ© povÃ½Å¡it SbÃ­rky na plnohodnotnÃ© entity s vlastnÃ­m kontextem a SEO.

### 1\. RozhodnutÃ­ o ArchitektuÅ™e: "ZrcadlenÃ­"

PÅ¯vodnÃ­ Ãºvahy smÄ›Å™ovaly k rychlÃ½m ÃºpravÃ¡m stÃ¡vajÃ­cÃ­ strÃ¡nky.

  * **KlÃ­ÄovÃ½ moment:** UvÄ›domÄ›nÃ­ si, Å¾e "SbÃ­rka" nenÃ­ jen Å¡tÃ­tek, ale kontejner s obsahem, kterÃ½ potÅ™ebuje stejnou pÃ©Äi jako Video.
  * **RozhodnutÃ­:** PÅ™ijmout architektonickÃ½ vzor z FÃ¡ze 6 (`Manage Table` -\> `Edit Form`) a aplikovat ho na SbÃ­rky.
  * **CÃ­l:** Sjednotit UX. Admin (a budoucÃ­ KurÃ¡tor) bude mÃ­t pro videa i sbÃ­rky identickÃ© workflow: `PÅ™ehled` -\> `Editace` -\> `AI Asistence`.

### 2\. Strategie Obsahu: "Bottom-Up" (Zdola nahoru)

Å˜eÅ¡ili jsme, kde vzÃ­t kvalitnÃ­ popis sbÃ­rky (SEO), aniÅ¾ by ho musel admin psÃ¡t ruÄnÄ›.

  * **HypotÃ©za:** Identita sbÃ­rky je tvoÅ™ena souÄtem identit videÃ­ v nÃ­ obsaÅ¾enÃ½ch.
  * **Å˜eÅ¡enÃ­:** VyuÅ¾Ã­t AI k agregaci. MÃ­sto vymÃ½Å¡lenÃ­ textu AI "pÅ™eÄte" abstrakty videÃ­ ve sbÃ­rce a vytvoÅ™Ã­ syntÃ©zu.
  * **Dopad:** TÃ­m se sbÃ­rka stÃ¡vÃ¡ "Å¾ivÃ½m" materiÃ¡lem, kterÃ½ reflektuje svÅ¯j obsah.

### 3\. OdloÅ¾enÃ­ pÅ™ekladÅ¯

PÅ¯vodnÄ› zvaÅ¾ovanÃ¡ funkce pÅ™ekladÅ¯ jednotlivÃ½ch videÃ­ byla odloÅ¾ena.

  * **DÅ¯vod:** Prioritou je nynÃ­ struktura knihovny (sbÃ­rky). PÅ™eklad je "lokÃ¡lnÃ­" vylepÅ¡enÃ­ videa, ale bez kvalitnÃ­ch sbÃ­rek se videa v knihovnÄ› "ztrÃ¡cejÃ­".

-----

## ğŸ“„ ZadÃ¡nÃ­ projektu: WebovÃ¡ aplikace Mediathek (FÃ¡ze 15 - EkosystÃ©m SbÃ­rek)

**Datum:** 30. listopadu 2025
**Verze:** 15.0
[cite\_start]**Navazuje na:** FÃ¡ze 7 (Implementace SbÃ­rek [cite: 1139][cite\_start]), FÃ¡ze 6 (SprÃ¡va obsahu [cite: 1447][cite\_start]), FÃ¡ze 12 (SEO Metadata [cite: 637])

### 1\. NÃ¡zev projektu

Mediathek

### 2\. ğŸ¯ CÃ­l FÃ¡ze

CÃ­lem tÃ©to fÃ¡ze je povÃ½Å¡it sprÃ¡vu **SbÃ­rek (Collections)** na stejnou ÃºroveÅˆ, jakou mÃ¡ sprÃ¡va VideÃ­.
PÅ™echÃ¡zÃ­me od jednoduchÃ©ho seznamu k plnohodnotnÃ©mu editorskÃ©mu prostÅ™edÃ­.
VytvoÅ™Ã­me dedikovanou strÃ¡nku pro **Editaci SbÃ­rky**, kterÃ¡ umoÅ¾nÃ­:

1.  Spravovat metadata sbÃ­rky (NÃ¡zev, Popis, Viditelnost).
2.  VidÄ›t kontext (seznam videÃ­ ve sbÃ­rce).
3.  VyuÅ¾Ã­t AI k vygenerovÃ¡nÃ­ **SEO obsahu sbÃ­rky** (Popis a KlÃ­ÄovÃ¡ slova) na zÃ¡kladÄ› analÃ½zy videÃ­ v nÃ­ obsaÅ¾enÃ½ch.

### 3\. Rozsah pro FÃ¡zi 15

  * [cite\_start]**Frontend (SprÃ¡va):** Transformace strÃ¡nky `/admin/collections` na tabulkovÃ½ pÅ™ehled "SprÃ¡va SbÃ­rek" (dle vzoru `/admin/manage` [cite: 1450]).
  * **Frontend (Editace):** VytvoÅ™enÃ­ novÃ© strÃ¡nky `/admin/collections/edit/[id]`, kterÃ¡ bude slouÅ¾it jako hlavnÃ­ editorskÃ© rozhranÃ­ pro konkrÃ©tnÃ­ sbÃ­rku.
  * **Frontend (PÅ™idÃ¡nÃ­):** VytvoÅ™enÃ­ strÃ¡nky `/admin/collections/add` pro konzistenci (oddÄ›lenÃ­ od pÅ™ehledu).
  * **Backend (API):** RozÅ¡Ã­Å™enÃ­ API pro sbÃ­rky o metody GET (detail), PUT (update) a logiku pro AI generovÃ¡nÃ­.
  * **DatabÃ¡ze:** RozÅ¡Ã­Å™enÃ­ modelu `Collection` o SEO pole.
  * **AI Logika:** Implementace agregace obsahu videÃ­ pro generovÃ¡nÃ­ popisu sbÃ­rky.

### 4\. ğŸ›ï¸ NÃ¡vrh Å˜eÅ¡enÃ­ a Architektura

#### 4.1. DatabÃ¡zovÃ½ Model (Prisma)

RozÅ¡Ã­Å™enÃ­ modelu `Collection` o pole pro uchovÃ¡nÃ­ vygenerovanÃ©ho kontextu.

```prisma
model Collection {
  // ... existujÃ­cÃ­ pole (id, name, description, isPublic, authorId...)

  // --- NOVÃ POLE FÃZE 15 ---
  seoDescription String?   @db.Text  // AI generovanÃ½ souhrn obsahu sbÃ­rky
  seoKeywords    String[]  // KlÃ­ÄovÃ¡ slova typickÃ¡ pro tuto sbÃ­rku
}
```

#### 4.2. StrÃ¡nka "SprÃ¡va SbÃ­rek" (`/admin/collections`)

Tato strÃ¡nka nahradÃ­ souÄasnÃ½ jednoduchÃ½ seznam. [cite\_start]Bude implementovÃ¡na jako **RSC (React Server Component)**[cite: 960].

  * **Vzhled:** Tabulka (Table View).
  * **Sloupce:**
      * NÃ¡zev sbÃ­rky
      * PoÄet videÃ­ (Count)
      * Viditelnost (VeÅ™ejnÃ¡/SoukromÃ¡)
      * SEO Status (IndikÃ¡tor, zda je vyplnÄ›n `seoDescription`)
      * Akce (TlaÄÃ­tka: `[Editovat]`, `[Smazat]`)
  * [cite\_start]**Logika:** NaÄÃ­tÃ¡ data s ohledem na roli uÅ¾ivatele (ADMIN vidÃ­ vÅ¡e, KURATOR jen svÃ©) â€“ vyuÅ¾itÃ­ existujÃ­cÃ­ RBAC logiky[cite: 1463].

#### 4.3. StrÃ¡nka "Editace SbÃ­rky" (`/admin/collections/edit/[id]`)

NovÃ¡ strÃ¡nka, kterÃ¡ je centrem tÃ©to fÃ¡ze.

**Sekce A: Metadata (FormulÃ¡Å™)**

  * NÃ¡zev sbÃ­rky (Input).
  * Viditelnost (Checkbox `isPublic`).
  * *PoznÃ¡mka:* PÅ¯vodnÃ­ pole `description` mÅ¯Å¾e bÃ½t slouÄeno s novÃ½m `seoDescription` nebo ponechÃ¡no jako "krÃ¡tkÃ½ popis" vs "plnÃ½ obsah". (DoporuÄenÃ­: Nechat AI generovat do `seoDescription` a uÅ¾ivatel aÅ¥ to edituje).

**Sekce B: Kontext (Seznam videÃ­)**

  * ZobrazÃ­ seznam videÃ­, kterÃ¡ jsou aktuÃ¡lnÄ› v tÃ©to sbÃ­rce.
  * U kaÅ¾dÃ©ho videa zobrazÃ­ miniaturu a jeho `seoSummary` (pokud existuje).
  * *ÃšÄel:* Aby editor vidÄ›l, "z Äeho" se sbÃ­rka sklÃ¡dÃ¡.

**Sekce C: SEO a AI (GenerÃ¡tor)**

  * TlaÄÃ­tko: `âœ¨ Vygenerovat popis sbÃ­rky z videÃ­`.
  * Pole:
      * `Popis sbÃ­rky` (Textarea - napojeno na `seoDescription`).
      * `KlÃ­ÄovÃ¡ slova` (Tags input - napojeno na `seoKeywords`).

#### 4.4. Backend a AI Logika (Bottom-Up)

NovÃ½ endpoint `/api/ai/generate-collection-seo`.

  * **Vstup:** ID sbÃ­rky.
  * **Proces:**
    1.  NaÄte z DB poslednÃ­ch X (napÅ™. 15) videÃ­ v danÃ© sbÃ­rce.
    2.  Z kaÅ¾dÃ©ho videa vezme `seoSummary` (nebo `title` + `summary`, pokud SEO chybÃ­).
    3.  SestavÃ­ prompt.
  * **Prompt (System):**
    > "Jsi kurÃ¡tor digitÃ¡lnÃ­ knihovny. TvÃ½m Ãºkolem je vytvoÅ™it anotaci pro sbÃ­rku videÃ­.
    > Zde jsou shrnutÃ­ jednotlivÃ½ch videÃ­ v tÃ©to sbÃ­rce:
    > [SEZNAM SHRUNTÃ]
    > Na zÃ¡kladÄ› tÄ›chto tÃ©mat vytvoÅ™:
    > 1.  VÃ½stiÅ¾nÃ½, souhrnnÃ½ popis (seoDescription), o Äem tato sbÃ­rka jako celek pojednÃ¡vÃ¡. Hledej spoleÄnÃ© jmenovatele a vzdÄ›lÃ¡vacÃ­ pÅ™Ã­nos.
    > 2.  Seznam 5-10 klÃ­ÄovÃ½ch slov (seoKeywords), kterÃ¡ sbÃ­rku definujÃ­."

### 5\. ğŸš¦ FunkÄnÃ­ PoÅ¾adavky (FR)

  * **FR1 (Architektura):** Struktura strÃ¡nek pro sbÃ­rky (`Manage` -\> `Edit`) musÃ­ kopÃ­rovat strukturu strÃ¡nek pro videa.
  * **FR2 (PÅ™ehled):** Admin vidÃ­ tabulku sbÃ­rek s informacÃ­ o poÄtu videÃ­ a stavu SEO.
  * **FR3 (Editace):** Na strÃ¡nce editace je viditelnÃ½ seznam videÃ­ zaÅ™azenÃ½ch do sbÃ­rky (kontext).
  * **FR4 (AI GenerovÃ¡nÃ­):** SystÃ©m umÃ­ vygenerovat popis sbÃ­rky a klÃ­ÄovÃ¡ slova na zÃ¡kladÄ› analÃ½zy textÅ¯ videÃ­ v nÃ­ obsaÅ¾enÃ½ch.
  * **FR5 (UloÅ¾enÃ­):** VygenerovanÃ¡ metadata lze upravit a uloÅ¾it do databÃ¡ze.

### 6\. ğŸ”’ NefunkÄnÃ­ PoÅ¾adavky (NFR)

  * **NFR1 (Konzistence):** UI prvky (tabulky, formulÃ¡Å™e, tlaÄÃ­tka) musÃ­ vizuÃ¡lnÄ› odpovÃ­dat sekci VideÃ­.
  * **NFR2 (Token Optimization):** Do promptu pro AI se neposÃ­lajÃ­ celÃ© pÅ™episy videÃ­, ale pouze jejich existujÃ­cÃ­ shrnutÃ­ (`seoSummary` nebo `summary`), aby se Å¡etÅ™ily tokeny a zrychlila odezva.

### 7\. âœ… AkceptaÄnÃ­ Kriteria (Definice "Hotovo")

1.  Admin pÅ™ejde na `/admin/collections` a vidÃ­ tabulku mÃ­sto prostÃ©ho seznamu.
2.  Admin klikne na "Editovat" u sbÃ­rky "ZdravÃ­".
3.  OtevÅ™e se strÃ¡nka `/admin/collections/edit/[id]`.
4.  Admin vidÃ­, Å¾e ve sbÃ­rce je 5 videÃ­ a vidÃ­ jejich nÃ¡zvy.
5.  Admin klikne na `âœ¨ Vygenerovat popis`.
6.  Do pole Popis se naÄte text: *"Tato sbÃ­rka se komplexnÄ› vÄ›nuje tÃ©matÅ¯m dlouhovÄ›kosti, se zamÄ›Å™enÃ­m na..."*
7.  Admin text uloÅ¾Ã­ a ten se propÃ­Å¡e do databÃ¡ze.

------------------------------------------------------------------------

id_chat: 
https://gemini.google.com/u/1/app/db85eb08ee31958f
