J√Å_PROMPT:
V p≈ô√≠loze jsou v≈°echny dokumenty t√Ωkaj√≠c√≠ch se zad√°n√≠ ve webov√©m projektu aplikace  kter√° spravuje sb√≠rky vide√≠ z youtube, uspo≈ô√°d√°va jejich obsah do strukturovan√©ho obsahu a bude vytv√°≈ôet kompil√°ty obsahu v√≠ce vide√≠ do jednoho textov√©ho materi√°lu kter√Ω bude slou≈æit jako pr≈Øvodce touto knihovnou vide√≠. resp. n√°v≈°tƒõvn√≠k t√©to knihovny bude moci proƒç√≠tat tyto  knihovn√≠ materi√°ly kter√© budou odkazovat na podkladov√° videa. Nyn√≠ jsme v dal≈°√≠ v√Ωvojov√© f√°zi aplikace kdy bych tƒõl implementovat automatick√© z√≠sk√°v√°n√≠ √∫daj≈Ø z youtube jako je n√°zev videa, jeho popis a p≈ôepis videa. resp. bylo by mo≈æn√© vytvo≈ôit propojen√≠ na zdroj a p≈ô√≠slu≈°n√° pole na str√°nca https://mediathek-three.vercel.app/admin/edit/ v tomto projektu plnit automaticky kromƒõ pole pro vlo≈æen√≠ url videa resp. po vlo≈æen√≠ url videa by byl zah√°jen automaticky import do zb√Ωvaj√≠c√≠ch pol√≠ v tomto formul√°≈ôi resp. do pol√≠ n√°zev videa a shrnut√≠/popis a p≈ôepis videa (toto pole by se novƒõ v tomto v√Ωvojov√©m cyklu vytvo≈ôilo a bylo by um√≠stƒõno na str√°nce https://mediathek-three.vercel.app/admin/edit/ mezi poli [Za≈ôadit do sb√≠rek] a [Strukturovan√Ω Obsah (Kapitoly)] ). P≈ôepis videa by byl nahr√°v√°n pouze do formul√°≈ôe a pot√© ulo≈æen v datab√°zi v nƒõjak√© tabulce spravuj√≠c√≠ p≈ôepisy vide√≠ - tyto budou tak√© pou≈æity k titulkov√°n√≠ dan√Ωch vide√≠ a tak√© k dal≈°√≠mu zpracov√°n√≠ strukturovan√©ho obsahu. Teprve v dal≈°√≠m v√Ωvojov√©m cyklu aplikace by se ≈ôe≈°ilo navazuj√≠c√≠ zad√°n√≠ resp. funkcionalita vytvo≈ôen√≠ strukturovan√©ho obsahu videa pomoc√≠ nƒõkter√© z API slu≈æeb umƒõl√© inteligence (nap≈ô. gemini). Resp. nyn√≠ bychom zat√≠m ≈ôe≈°ili pouze z√≠sk√°n√≠ informac√≠ resp. n√°zvu, shrnut√≠/popis z youtube a z√≠sk√°n√≠ p≈ôepisu videa. Je mo≈æn√© vytvo≈ôit takov√©to standardn√≠ zad√°n√≠ pro tuto aplikaci. Technick√° realizovatelnost by se ≈ôe≈°ila a≈æ v dal≈°√≠m kroku tohoto v√Ωvojov√©ho cyklu. D√≠k ;-)
[README_01_01ZADANI][README_02_01ZADANI][README_03_01ZADANI][README_04_01ZADANI][README_05_01ZADANI][README_06_01ZADANI][README_07_01ZADANI][README_08_01ZADANI][README_09_01ZADANI]

AI_RESPONZE:
To je naprosto skvƒõl√Ω a logick√Ω krok. P≈ôech√°z√≠me od "manu√°ln√≠ d≈ôiny" k **automatizaci**.

P≈ôesnƒõ jak p√≠≈°ete ‚Äì abychom mohli v budoucnu zapojit AI (Gemini) pro generov√°n√≠ tƒõch √∫≈æasn√Ωch strukturovan√Ωch obsah≈Ø, mus√≠me nejprve AI "nakrmit" daty. A ta data (p≈ôepis/titulky) le≈æ√≠ na YouTube.

T√≠mto krokem vybudujeme "most" mezi YouTube a va≈°√≠ datab√°z√≠.

P≈ôipravil jsem **robustn√≠ zad√°n√≠ pro F√°zi 10**, kter√© p≈ôesnƒõ specifikuje, co se m√° d√≠t na str√°nce editace a jak se maj√≠ data ukl√°dat, ani≈æ bychom zat√≠m ≈ôe≈°ili slo≈æitost AI zpracov√°n√≠ (to p≈ôijde potom).

Zde je n√°vrh dokumentu:

-----

# üìÑ Zad√°n√≠ projektu: Webov√° aplikace Mediathek (F√°ze 10 - Automatizace Z√≠sk√°v√°n√≠ Dat)

**Datum:** 19. listopadu 2025
**Verze:** 10.0
**Navazuje na:** F√°ze 7 (Spr√°va obsahu) a F√°ze 9 (P≈ô√≠prava rol√≠)

## 1\. N√°zev projektu

Mediathek

## 2\. üéØ C√≠l F√°ze

C√≠lem t√©to f√°ze je v√Ωraznƒõ zefektivnit pr√°ci kur√°tora (Admina) automatizac√≠ z√≠sk√°v√°n√≠ vstupn√≠ch dat.
M√≠sto ruƒçn√≠ho kop√≠rov√°n√≠ n√°zv≈Ø, popis≈Ø a hled√°n√≠ p≈ôepis≈Ø vide√≠ aplikace automaticky st√°hne tato metadata p≈ô√≠mo ze zdroje (YouTube) na z√°kladƒõ vlo≈æen√© URL.
Kl√≠ƒçov√Ωm prvkem je **z√≠sk√°n√≠ a ulo≈æen√≠ p≈ôepisu (transcriptu)** videa, kter√Ω bude slou≈æit jako nezbytn√Ω vstup pro budouc√≠ generov√°n√≠ strukturovan√©ho obsahu pomoc√≠ umƒõl√© inteligence.

## 3\. Rozsah pro F√°zi 10

  * **Backend (API):** Implementace logiky pro stahov√°n√≠ metadat (N√°zev, Popis) a titulk≈Ø (Transcript) z YouTube API nebo pomoc√≠ scraping knihoven.
  * **Datab√°ze:** Roz≈°√≠≈ôen√≠ datov√©ho modelu o tabulku (nebo pole) pro ulo≈æen√≠ p≈ôepisu videa.
  * **Frontend (UI/UX):** √öprava formul√°≈ô≈Ø `admin/add` a `admin/edit`.
      * Implementace tlaƒç√≠tka nebo automatick√©ho triggeru "Naƒç√≠st data z YouTube".
      * P≈ôid√°n√≠ nov√©ho pole "P≈ôepis videa" (Transcript) do formul√°≈ôe.
  * **Out of Scope (Mimo rozsah):**
      * Zpracov√°n√≠ p≈ôepisu pomoc√≠ AI (Gemini/ChatGPT).
      * Automatick√© generov√°n√≠ kapitol (toto bude F√°ze 11).
      * Ve≈ôejn√© zobrazen√≠ p≈ôepisu (zat√≠m slou≈æ√≠ jen pro backend a admina).

## 4\. üèõÔ∏è N√°vrh ≈òe≈°en√≠ a Architektura

### 4.1. Datab√°zov√Ω Model (Prisma)

Je nutn√© vytvo≈ôit m√≠sto pro ulo≈æen√≠ p≈ôepisu. Proto≈æe p≈ôepis m≈Ø≈æe b√Ωt dlouh√Ω text nebo strukturovan√Ω JSON (s ƒçasov√Ωmi znaƒçkami), doporuƒçuje se vytvo≈ôit samostatn√Ω model nebo roz≈°√≠≈ôit `Video`.

**N√°vrh √∫pravy `schema.prisma`:**

```prisma
model Video {
  // ... st√°vaj√≠c√≠ pole
  transcript   Transcript?  // Relace 1:1 (Video m≈Ø≈æe m√≠t jeden p≈ôepis)
}

model Transcript {
  id          String   @id @default(cuid())
  videoId     String   @unique
  video       Video    @relation(fields: [videoId], references: [id], onDelete: Cascade)
  
  content     String   @db.Text // Surov√Ω text p≈ôepisu (pro ƒçten√≠)
  fullData    Json?    // Strukturovan√Ω form√°t s ƒçasov√Ωmi znaƒçkami (pro budouc√≠ AI zpracov√°n√≠)
  language    String   @default("cs") // Jazyk titulk≈Ø
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

### 4.2. U≈æivatelsk√© Rozhran√≠ (Frontend)

Zmƒõny se t√Ωkaj√≠ prim√°rnƒõ str√°nky `/admin/edit/[id]` (a analogicky `/admin/add`).

**Logika formul√°≈ôe:**

1.  **Vstup:** Administr√°tor vlo≈æ√≠/zmƒõn√≠ YouTube URL.
2.  **Akce:** Aplikace (automaticky po vlo≈æen√≠ nebo na tlaƒç√≠tko "Naƒç√≠st data") zavol√° n√°≈° intern√≠ API endpoint.
3.  **Reakce:**
      * Pole **N√°zev** se vypln√≠ n√°zvem z YouTube.
      * Pole **Shrnut√≠/Popis** se p≈ôedvypln√≠ popisem z YouTube (admin ho m≈Ø≈æe n√°slednƒõ upravit/zkr√°tit).
      * Nov√© pole **P≈ôepis videa** se vypln√≠ sta≈æen√Ωm textem titulk≈Ø.

**Um√≠stƒõn√≠ nov√©ho pole:**
Dle zad√°n√≠ bude pole "P≈ôepis videa" um√≠stƒõno strategicky:

1.  N√°zev & Shrnut√≠
2.  Za≈ôadit do sb√≠rek (Collections)
3.  **[NOV√â] P≈ôepis videa (Transcript)** ‚Äì *velk√© textov√© pole (textarea), read-only nebo editovateln√©.*
4.  Strukturovan√Ω Obsah (Kapitoly)

### 4.3. Backend (Data Fetching)

Bude vytvo≈ôen nov√Ω API endpoint (nap≈ô. `/api/youtube/fetch-data`), kter√Ω p≈ôijme URL videa.

  * **Metadata:** Pou≈æije YouTube Data API (nebo `oEmbed` endpoint) pro z√≠sk√°n√≠ `Title` a `Description`.
  * **Transcript:** Pou≈æije knihovnu (nap≈ô. `youtube-captions-scraper` nebo `ytdl-core`), kter√° dok√°≈æe extrahovat titulky (up≈ôednostn√≠ manu√°lnƒõ vytvo≈ôen√©, pokud nejsou, vezme automaticky generovan√©).

## 5\. üö¶ Funkƒçn√≠ Po≈æadavky (FR)

  * **FR1 (Auto-fill Metadata):** Po zad√°n√≠ platn√© YouTube URL do formul√°≈ôe se automaticky (nebo na kliknut√≠) st√°hne a vypln√≠ N√°zev a Popis videa do p≈ô√≠slu≈°n√Ωch pol√≠ input/textarea.
  * **FR2 (Fetch Transcript):** Syst√©m mus√≠ b√Ωt schopen st√°hnout titulky k videu. Mus√≠ preferovat ƒçesk√Ω jazyk, pokud nen√≠, zkus√≠ anglick√Ω (nebo dle nastaven√≠).
  * **FR3 (Zobrazen√≠ P≈ôepisu):** Sta≈æen√Ω p≈ôepis se zobraz√≠ ve formul√°≈ôi v nov√©m poli "P≈ôepis videa".
  * **FR4 (Ulo≈æen√≠):** P≈ôi ulo≈æen√≠ videa (tlaƒç√≠tko "Ulo≈æit") se obsah pole "P≈ôepis videa" ulo≈æ√≠ do datab√°ze (do tabulky `Transcript`).
  * **FR5 (Editace):** Pokud admin pole p≈ôepisu ruƒçnƒõ uprav√≠, ulo≈æ√≠ se upraven√° verze.

## 6\. üîí Nefunkƒçn√≠ Po≈æadavky (NFR)

  * **NFR1 (O≈°et≈ôen√≠ chyb):** Pokud video nem√° titulky, aplikace nesm√≠ spadnout via error. Mus√≠ zobrazit hl√°≈°ku "Titulky nebyly nalezeny" a pole z≈Østane pr√°zdn√© (nebo umo≈æn√≠ ruƒçn√≠ vlo≈æen√≠).
  * **NFR2 (V√Ωkon):** Stahov√°n√≠ dat z YouTube nesm√≠ blokovat UI. Mus√≠ b√Ωt indikov√°n stav "Naƒç√≠t√°m data..." (loading spinner).
  * **NFR3 (API Limity):** ≈òe≈°en√≠ mus√≠ br√°t v √∫vahu limity YouTube API (pokud bude pou≈æito ofici√°ln√≠ API) nebo stabilitu scraping knihoven.

## 7\. üíª Technologick√Ω Stack

  * **Backend:** Next.js API Routes.
  * **Knihovny:**
      * `youtube-captions-scraper` (pro z√≠sk√°n√≠ titulk≈Ø bez nutnosti slo≈æit√© OAuth autentizace).
      * p≈ô√≠padnƒõ `googleapis` (pro ofici√°ln√≠ metadata, pokud bude t≈ôeba).

## 8\. ‚úÖ Akceptaƒçn√≠ Krit√©ria (Definice "Hotovo")

1.  Admin otev≈ôe str√°nku `/admin/add` nebo `/admin/edit`.
2.  Vlo≈æ√≠ URL videa z YouTube.
3.  Bƒõhem kr√°tk√© chv√≠le se automaticky vypln√≠ N√°zev a Popis.
4.  V nov√©m poli "P≈ôepis videa" (mezi Sb√≠rkami a Kapitoly) se objev√≠ textov√Ω p≈ôepis videa.
5.  Admin klikne na "Ulo≈æit".
6.  V datab√°zi (ovƒõ≈ôeno p≈ôes Prisma Studio) je vytvo≈ôen z√°znam `Transcript` propojen√Ω s dan√Ωm videem a obsahuje text titulk≈Ø.

## 9\. üöÄ Budouc√≠ Rozvoj (Mimo rozsah t√©to f√°ze)

  * **F√°ze 11 (AI Strukturalizace):** Odesl√°n√≠ ulo≈æen√©ho p≈ôepisu (z tabulky Transcript) do API (nap≈ô. Google Gemini) s promptem: *"Vytvo≈ô z tohoto textu strukturovan√Ω obsah s ƒçasov√Ωmi znaƒçkami ve form√°tu MTF-H."* V√Ωsledek se pak vlo≈æ√≠ do pole "Strukturovan√Ω obsah".

-----

**Souhlas√≠te s t√≠mto znƒõn√≠m zad√°n√≠?** Pokud ano, je p≈ôipraveno k p≈ôed√°n√≠ realizaƒçn√≠mu t√Ωmu (nebo k va≈°emu vlastn√≠mu v√Ωvoji jako *roadmapa*).

id_chat: 
https://gemini.google.com/u/1/app/453443199fc84a89
